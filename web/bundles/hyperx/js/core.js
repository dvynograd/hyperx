
var extsrc=null;(function(){extsrc=new Object;extsrc.complete=function(f){this.complete.funcs.push(f);};extsrc.complete.funcs=[];var document_write=document.write;var document_writeln=document.writeln;var buffer='';var span='';function dumpBuffer(){if(buffer&&span){document.write=document_write;document.writeln=document_writeln;var txt=document.createElement('span');txt.innerHTML=buffer;span.appendChild(txt);buffer='';};};function runNextScript(){dumpBuffer();var scripts=document.getElementsByTagName('script');for(var i=0;i<scripts.length;i++){var current_script=scripts[i];var cur_asyncsrc=current_script.getAttribute('asyncsrc');if(cur_asyncsrc){current_script.setAttribute('asyncsrc','');var s=document.createElement('script');s.async=true;s.src=cur_asyncsrc;document.getElementsByTagName('head')[0].appendChild(s);};var cur_extsrc=current_script.getAttribute('extsrc');if(cur_extsrc){current_script.setAttribute('extsrc','');span=document.createElement('span');current_script.parentNode.insertBefore(span,current_script);document.write=function(txt){buffer+=txt;};document.writeln=function(txt){buffer+=txt;buffer+='\n';};var s=document.createElement('script');s.async=true;s.src=cur_extsrc;if(isIE()){s.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete'){runNextScript();};};}else{if((navigator.userAgent.indexOf("Firefox")!=-1)||('onerror'in s)){s.onload=runNextScript;s.onerror=runNextScript;}else{s.onload=runNextScript;s.onreadystatechange=runNextScript;};};document.getElementsByTagName('head')[0].appendChild(s);return;};};dumpBuffer();document.write=document_write;document.writeln=document_writeln;for(var i=0;i<extsrc.complete.funcs.length;i++){extsrc.complete.funcs[i]();};};function isIE(){return/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);};function init(){if(arguments.callee.done)return;arguments.callee.done=true;runNextScript();};if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);}
if(/WebKit/i.test(navigator.userAgent)){var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(_timer);init();}},10);}
window.onload=init;})();var pphplangs={"1":{"picture":"http:\/\/uacar.dev\/files\/languages\/images\/0\/1\/russkij_1_p0.png","nick":"ru","title":"Русский"}}
function JsHttpRequest(){this._construct()};(function(){var COUNT=0;var PENDING={};var CACHE={};JsHttpRequest.dataReady=function(id,text,js){var undef;var th=PENDING[id];delete PENDING[id];if(th){delete th._xmlReq;if(th.caching&&th.hash)CACHE[th.hash]=[text,js];th._dataReady(text,js);}else if(th!==false){throw"JsHttpRequest.dataReady(): unknown pending id: "+id;}};JsHttpRequest.query=function(url,content,onready,nocache){var req=new JsHttpRequest();req.caching=!nocache;req.onreadystatechange=function(){if(req.readyState==4){onready(req.responseJS,req.responseText);}};req.open(null,url,true);req.send(content);},JsHttpRequest.prototype={onreadystatechange:null,readyState:0,responseText:null,responseXML:null,friendlyURL:true,status:200,statusText:"OK",responseJS:null,session_name:"SESSID",caching:false,loader:null,_span:null,_id:null,_xmlReq:null,_openArg:null,_reqHeaders:null,_maxUrlLen:2000,dummy:function(){},abort:function(){if(this._xmlReq){this._xmlReq.abort();this._xmlReq=null;}
this._cleanupScript();this._changeReadyState(4,true);},_parseFriendURL:function(url){var queryText=url.split('?',2)[1].split('&');var url=url.split('?',2)[0];var tmpUrl=url.split('/');var uLast=tmpUrl[tmpUrl.length-1];tmpUrl=tmpUrl.slice(0,tmpUrl.length-1);for(var i in queryText){if(queryText[i]instanceof Function)continue;tmpUrl.push(queryText[i].split('=')[0],queryText[i].split('=')[1]);}
tmpUrl.push(uLast);url=tmpUrl.join('/');return url;},open:function(method,url,asyncFlag,username,password){var sid=this._getSid();if(sid){if(this.friendlyURL&&url.indexOf('?')!=-1){url=this._parseFriendURL(url);}
url+=(url.indexOf('?')>=0?'&':'?')+this.session_name+"="+this.escape(sid);}
this._openArg={method:(method||'').toUpperCase(),url:url,asyncFlag:asyncFlag,username:username!=null?username:'',password:password!=null?password:''};this._id=null;this._xmlReq=null;this._reqHeaders=[];this._changeReadyState(1,true);return true;},send:function(content){this._changeReadyState(1,true);var url=this._openArg.url;var queryText=[];var queryElem=[];if(!this._hash2query(content,null,queryText,queryElem))return;var loader=(this.loader||'').toLowerCase();var method=this._openArg.method;var xmlReq=null;var qtext=queryText.join('&');if(qtext)
var fullGetUrl=url+(url.indexOf('?')>=0?'&':'?')+queryText.join('&');else
var fullGetUrl=url+(url.indexOf('?')>=0?'&':'');if(this.friendlyURL&&url.indexOf('?')!=-1){fullGetUrl=this._parseFriendURL(fullGetUrl);}
var id=this.md5(fullGetUrl);if(queryElem.length&&!loader){loader='form';}else{xmlReq=this._obtainXmlReq(id,url);}
this.hash=null;if(this.caching&&!queryElem.length){this.hash=fullGetUrl;if(CACHE[this.hash]){var c=CACHE[this.hash];this._dataReady(c[0],c[1]);return false;}}
var canSetHeaders=xmlReq&&(window.ActiveXObject||xmlReq.setRequestHeader);if(!loader){if(xmlReq){loader='xml';switch(method){case"POST":if(!canSetHeaders){loader='form';}
break;case"GET":break;default:if(canSetHeaders){method='POST';}else{if(fullGetUrl.length>this._maxUrlLen){method='POST';loader='form';}else{method='GET';}}}}else{loader='script';switch(method){case"POST":loader='form';break;case"GET":break;default:if(fullGetUrl.length>this._maxUrlLen){method='POST';loader='form';}else{method='GET';}}}}else if(!method){switch(loader){case'form':method='POST';break;case'script':method='GET';break;default:if(canSetHeaders){method='POST';}else{method='GET';}}}
var requestBody=null;if(method=='GET'){url=fullGetUrl;if(url.length>this._maxUrlLen)return this._error('Cannot use so long query (URL is '+url.length+' byte(s) length) with GET request.');}else if(method=='POST'){requestBody=queryText.join('&');}else{return this._error('Unknown method: '+method+'. Only GET and POST are supported.');}
url=url+(url.indexOf('?')>=0?'&':'?')+'JsHttpRequest='+id+'-'+loader;PENDING[id]=this;switch(loader){case'xml':if(!xmlReq)return this._error('Cannot use XMLHttpRequest or ActiveX loader: not supported');if(method=="POST"&&!canSetHeaders)return this._error('Cannot use XMLHttpRequest loader or ActiveX loader, POST method: headers setting is not supported');if(queryElem.length)return this._error('Cannot use XMLHttpRequest loader: direct form elements using and uploading are not implemented');this._xmlReq=xmlReq;var a=this._openArg;this._xmlReq.open(method,url,a.asyncFlag,a.username,a.password);if(canSetHeaders){for(var i=0;i<this._reqHeaders.length;i++)
this._xmlReq.setRequestHeader(this._reqHeaders[i][0],this._reqHeaders[i][1]);this._xmlReq.setRequestHeader('Content-Type','application/octet-stream');}
return this._xmlReq.send(requestBody);case'script':if(method!='GET')return this._error('Cannot use SCRIPT loader: it supports only GET method');if(queryElem.length)return this._error('Cannot use SCRIPT loader: direct form elements using and uploading are not implemented');this._obtainScript(id,url);return true;case'form':if(!this._obtainForm(id,url,method,queryText,queryElem))return null;return true;default:return this._error('Unknown loader: '+loader);}},getAllResponseHeaders:function(){if(this._xmlReq)return this._xmlReq.getAllResponseHeaders();return'';},getResponseHeader:function(label){if(this._xmlReq)return this._xmlReq.getResponseHeader(label);return'';},setRequestHeader:function(label,value){this._reqHeaders[this._reqHeaders.length]=[label,value];},_construct:function(){if(typeof portal!="undefined"&&portal.vars)
this.friendlyURL=portal.vars.friendlyURL;else if(window['JsFriendly']!==undefined)
this.friendlyURL=window['JsFriendly'];},_dataReady:function(text,js){with(this){if(text!==null||js!==null){status=4;responseText=responseXML=text;responseJS=js;}else{status=500;responseText=responseXML=responseJS=null;}
_changeReadyState(2);_changeReadyState(3);_changeReadyState(4);_cleanupScript();}},_error:function(msg){throw(window.Error?new Error(msg):msg);},_obtainXmlReq:function(id,url){var p=url.match(new RegExp('^[a-z]+://(.*)','i'));if(p){var curHost=document.location.host.toLowerCase();if(p[1].substring(0,curHost.length).toLowerCase()==curHost){url=p[1].substring(curHost.length,p[1].length);}else{return null;}}
var req=null;if(window.XMLHttpRequest){try{req=new XMLHttpRequest()}catch(e){}}else if(window.ActiveXObject){try{req=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}
if(!req)try{req=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}
if(req){var th=this;req.onreadystatechange=function(){if(req.readyState==4){req.onreadystatechange=th.dummy;th.status=null;try{th.status=req.status;th.responseText=req.responseText;}catch(e){}
if(!th.status)return;var funcRequestBody=null;try{eval('funcRequestBody = function() {\n'+th.responseText+'\n}');}catch(e){return th._error("JavaScript code generated by backend is invalid!\n"+th.responseText);}
funcRequestBody();}};this._id=id;}
return req;},_obtainScript:function(id,href){with(document){var span=createElement('SPAN');span.style.display='none';body.insertBefore(span,body.lastChild);span.innerHTML='Text for stupid IE.<s'+'cript></'+'script>';setTimeout(function(){var s=span.getElementsByTagName('script')[0];s.language='JavaScript';if(s.setAttribute)s.setAttribute('src',href);else s.src=href;},10);this._id=id;this._span=span;}},_obtainForm:function(id,url,method,queryText,queryElem){if(method=='GET'){queryText=url.split('?',2)[1].split('&');url=url.split('?',2)[0];}
var div=document.createElement('DIV');div.id='jshr_d_'+id;div.style.position='absolute';div.style.visibility='hidden';div.innerHTML='<form enctype="multipart/form-data"></form>'+'<iframe src="javascript:\'\'" name="jshr_i_'+id+'" style="width:0px; height:0px; overflow:hidden; border:none"></iframe>';var form=div.getElementsByTagName('FORM')[0];var iframe=div.getElementsByTagName('IFRAME')[0];if(queryElem.length){form=queryElem[0][1].form;var foundFile=false;for(var i=0;i<queryElem.length;i++){var e=queryElem[i][1];if(!e.form){return this._error('Element "'+e.name+'" do not belongs to any form!');}
if(e.form!=form){return this._error('Element "'+e.name+'" belongs to different form. All elements must belong to the same form!');}
foundFile=foundFile||(e.tagName.toLowerCase()=='input'&&(e.type||'').toLowerCase()=='file');}
var et="multipart/form-data";if(form.enctype!=et&&foundFile){return this._error('Attribute "enctype" of elements\' form must be "'+et+'" (for IE), "'+form.enctype+'" given.');}}
var tmpE=[];for(var i=0;i<queryText.length;i++){var pair=queryText[i].split('=',2);var e=document.createElement('INPUT');e.type='hidden';e.name=unescape(pair[0]);e.value=pair[1]!=null?unescape(pair[1]):'';form.appendChild(e);tmpE[tmpE.length]=e;}
for(var i=0;i<queryElem.length;i++)queryElem[i][1].name=queryElem[i][0];document.body.insertBefore(div,document.body.lastChild);this._span=div;var sv={};sv.enctype=form.enctype;form.enctype="multipart/form-data";sv.action=form.action;form.action=url;sv.method=form.method;form.method=method;sv.target=form.target;form.target=iframe.name;sv.onsubmit=form.onsubmit;form.onsubmit=null;form.submit();for(var i in sv)form[i]=sv[i];for(var i=0;i<tmpE.length;i++)tmpE[i].parentNode.removeChild(tmpE[i]);for(var i=0;i<form.elements.length;i++){var e=form.elements[i];if(e.jshrSaveName!=null){e.name=e.jshrSaveName;e.jshrSaveName=null;}}},_cleanupScript:function(){var span=this._span;if(span){this._span=null;setTimeout(function(){span.parentNode.removeChild(span);},50);}
if(this._id){PENDING[this._id]=false;}
return false;},_getClass:function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1];},_hash2query:function(content,prefix,queryText,queryElem){if(prefix==null)prefix="";if((this._getClass(content)=='Object'||this._getClass(content)=='Array')&&content!==null){for(var k in content){var v=content[k];if(v==null||v instanceof Function)continue;var curPrefix=prefix?prefix+'['+this.escape(k)+']':this.escape(k);if(this._isFormElement(v)){var tn=v.tagName.toLowerCase();if(tn=='form'){for(var i=0;i<v.elements.length;i++){var e=v.elements[i];if(e.name)queryElem[queryElem.length]=[e.name,e];}}else if(tn=='input'||tn=='textarea'||tn=='select'){queryElem[queryElem.length]=[curPrefix,v];}else{return this._error('Invalid FORM element detected: name='+(e.name||'')+', tag='+e.tagName);}}else if((this._getClass(v)=='Object'||this._getClass(v)=='Array')&&v!==null){this._hash2query(v,curPrefix,queryText,queryElem);}else{if(v===null)continue;queryText[queryText.length]=curPrefix+"="+this.escape(''+v);}}}else{queryText=[content];}
return true;},_isFormElement:function(e){return e&&e.ownerDocument&&e.parentNode&&e.parentNode.appendChild&&e.tagName;},_getSid:function(){var m=document.location.search.match(new RegExp('[&?]'+this.session_name+'=([^&?]*)'));var sid=null;if(m){sid=m[1];}else{var m=document.cookie.match(new RegExp('(;|^)\\s*'+this.session_name+'=([^;]*)'));if(m)sid=m[2];}
return sid;},_changeReadyState:function(s,reset){with(this){if(reset){status=statusText=responseJS=null;responseText='';}
readyState=s;if(onreadystatechange)onreadystatechange();}},escape:function(s){return escape(s).replace(new RegExp('\\+','g'),'%2B');},md5:function(str){var RotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));};var AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}};var F=function(x,y,z){return(x&y)|((~x)&z);};var G=function(x,y,z){return(x&z)|(y&(~z));};var H=function(x,y,z){return(x^y^z);};var I=function(x,y,z){return(y^(x|(~z)));};var FF=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var GG=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var HH=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var II=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var ConvertToWordArray=function(str){var lWordCount;var lMessageLength=str.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(str.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var WordToHex=function(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;str=this.utf8_encode(str);x=ConvertToWordArray(str);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();},utf8_encode:function(str_data){str_data=str_data.replace(/\r\n/g,"\n");var tmp_arr=[],ac=0;for(var n=0;n<str_data.length;n++){var c=str_data.charCodeAt(n);if(c<128){tmp_arr[ac++]=String.fromCharCode(c);}else if((c>127)&&(c<2048)){tmp_arr[ac++]=String.fromCharCode((c>>6)|192);tmp_arr[ac++]=String.fromCharCode((c&63)|128);}else{tmp_arr[ac++]=String.fromCharCode((c>>12)|224);tmp_arr[ac++]=String.fromCharCode(((c>>6)&63)|128);tmp_arr[ac++]=String.fromCharCode((c&63)|128);}}
return tmp_arr.join('');}}})();var skin_img_dir='/skin/img/';var project_dir='project/';var share_dir='share/';var session_name='pphp_session';var max_cookie_life=60*60*24*180;var regulars={'email':/[0-9a-z_\.-]+@[0-9a-z_^\.-]+.[a-z]{2,6}/i,'url':/(http):\/\/([_a-z\d\-]+(\.[_a-z\d\-]+)+)(([_a-z\d\-\\\.\/])+[_a-z\d\-\\\/@#])/i,'date_time':/\d{4}-\d{2}-\d{2}\s(\d{1,2}):(\d{1,2}):(\d{1,2})/i,'date':/\d{4}-\d{1,2}-\d{1,2}/i}
var regular_str={'normal_datetime':'^[0-9]{2}:[0-9]{2}(?::[0-9]{2})? [0-9]{2}\\-[0-9]{2}\\-[0-9]{4}$','time':'^([0-1][0-9]|2[0-3]):[0-5][0-9]$','email':'^[0-9a-z_\\.-]+@[0-9a-z_^\\.-]+.[a-z]{2,6}$','url':'^((http):\\/\\/([_a-z\\d\\-]+(\\.[_a-z\\d\\-]+)+)(([_a-z\\d\\-\\\\\.\\/])+[_a-z\\d\\-\\\\\/@#])*)$','nick':'^[0-9a-zA-Z_\-]*$','field_nick':'^[0-9a-zA-Z_\-]*$','password':'^[0-9a-zA-Z]+$','sname':'^[A-Za-z0-9А-Яа-яіїєґІЇЄҐ~!@#$%^&\\*\\(\\)_\\+\\s]+$','float':'^(\\-)?[0-9]+((,|.)[0-9]+)?$'}
if(typeof console=='undefined'){console={'log':function(data){}};}
function elem(name,attrs,style,text,is_multilang){if(typeof is_multilang!="undefined"&&is_multilang){var e=document.createDocumentFragment();var new_attrs=attrs;if(new_attrs){var old_values=new_attrs['value'];var old_name=new_attrs['name'];}
var new_style=style?style:{};for(var i in portal.vars.langs){new_attrs['lang']=i;new_attrs['name']=old_name+'['+i+']';if(attrs['value'])
new_attrs['value']=old_values[i];new_style['display']=(typeof LangController!="undefined"&&LangController._curr_lang==i?'':'none');new_style['backgroundImage']='url('+portal.vars.langs[i]['picture']+')';new_style['backgroundPosition']='left center';new_style['backgroundRepeat']='no-repeat';new_style['paddingLeft']='20px';e.appendChild(elem(name,new_attrs,new_style,typeof text[i]!='undefined'?text[i]:''));}
return e;}else{var e=document.createElement(name);if(attrs){for(key in attrs){if(key=='class'){e.className=attrs[key];}else if(key=='id'){e.id=attrs[key];}else{e.setAttribute(key,attrs[key]);}}}
if(style){for(key in style){e.style[key]=style[key];}}
if(text){e.appendChild(document.createTextNode(text));}
return e;}}
function extend(Child,Parent){var F=function(){};console.log(Parent,Parent.prototype);F.prototype=Parent.prototype;console.log(F.prototype,Child.prototype);Child.prototype=new F();console.log(Child.prototype);Child.prototype.constructor=Child;Child.superclass=Parent.prototype;}
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){if(oldonload){oldonload();}
func();}}}
function domReady(i){var u=navigator.userAgent;var e=false;var st=setTimeout;if(/webkit/i.test(u)){st(function(){var dr=document.readyState;if(dr=="loaded"||dr=="complete")i();else st(arguments.callee,10);},10);}else if((/mozilla/i.test(u)&&!/(compati)/.test(u))||(/opera/i.test(u))){document.addEventListener("DOMContentLoaded",i,false);}else if(e){(function(){var t=document.createElement('doc:rdy');try{t.doScroll('left');i();t=null;}catch(e){st(arguments.callee,10);}})();}else addLoadEvent(i);}
function syncEvent(k,condition){(function(){try{if(eval(condition)==true){k();}else{setTimeout(arguments.callee,10);}}catch(e){setTimeout(arguments.callee,10);}})();}
function object2String(obj){var val,count=0,output="";if(obj){output+="{";for(var i in obj){val=obj[i];switch(typeof val){case("object"):if(val!=null){if(val[0]){output+=i+":"+array2String(val)+",";}else{output+=i+":"+object2String(val)+",";}}
break;case("string"):output+=i+":'"+escape(val)+"',";break;default:output+=i+":"+val+",";}
count++;}
if(count==0)
output=output+"}";else
output=output.substring(0,output.length-1)+"}";}
return output;}
function array2String(array){var output="";if(array){output+="[";for(var i in array){val=array[i];switch(typeof val){case("object"):if(val[0]){output+=array2String(val)+",";}else{output+=object2String(val)+",";}
break;case("string"):output+="'"+escape(val)+"',";break;default:output+=val+",";}}
if(array.length==0)
output=output+"]";else
output=output.substring(0,output.length-1)+"]";}
return output;}
function string2Object(string){try{eval("var result = "+string);return result;}catch(e){return false;}}
function string2Array(string){try{eval("var result = "+string);return result;}catch(e){return false;}}
function setCookie(name,value,expires,path,domain,secure){document.cookie=name+"="+escape(value)+
((expires)?"; expires="+expires:"")+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");}
function getCookie(name){var cookie=" "+document.cookie;var search=" "+name+"=";var setStr=null;var offset=0;var end=0;if(cookie.length>0){offset=cookie.indexOf(search);if(offset!=-1){offset+=search.length;end=cookie.indexOf(";",offset);if(end==-1){end=cookie.length;}
setStr=unescape(cookie.substring(offset,end));}}
return(setStr);}
function setCookieArr(name,value,expires,path,domain,secure,isArray){if(isArray!=undefined&&isArray==true){setCookie(name,array2String(value),expires,path,domain,secure);}else{setCookie(name,object2String(value),expires,path,domain,secure);}}
function getCookieArr(name,isArray){var tmp=getCookie(name);if(tmp&&tmp.length>0){if(isArray!=undefined&&isArray==true){return string2Array(tmp);}else{return string2Object(tmp);}}else{return false;}}
function oStorage(){this._init();}
oStorage.prototype={_mode:'',_storageName:'',_storageElem:null,initialized:false,_init:function(){this._storageName=window.location.hostname;if(this._storageName=='')
this._storageName='local';this._storageElem=elem('span',{'id':'storageElement'},{'width':'1px','height':'1px','font-size':'1px'},'');if(window.globalStorage){this._mode='DOM';this.initialized=true;}else if(false){athis=this;domReady(function(){athis._storageElem=document.appendChild(athis._storageElem);athis._storageElem.addBehavior("#default#userData")
athis._storageElem.load(athis._storageName);athis.initialized=true;});this._mode='userData';}else{this._mode='cookie';this.initialized=true;}
if(this._mode!='userData'){delete this._storageElem;this._storageElem=null;}},_storeObject:function(name,data,dtype){var _obj={'type':dtype,'data':data};var tmp_str=object2String(_obj);if(this._mode=='DOM'){globalStorage[this._storageName][name]=tmp_str;}else if(this._mode=='userData'){this._storageElem.setAttribute(name,tmp_str);this._storageElem.save(this._storageName);}else{var Expires=new Date();Expires.setTime(Expires.getTime()+max_cookie_life);setCookie(name,tmp_str,Expires.toGMTString(),'/');}},_getObject:function(name,dtype){if(this._mode=='DOM'){var tmp=String(globalStorage[this._storageName][name]);if(typeof tmp!='undefined'&&tmp&&tmp.length>0){var o=string2Object(tmp);delete tmp;if(typeof o!='undefined')
return o.data;else
return false;}}else if(this._mode=='userData'){var tmp=this._storageElem.getAttribute(name);if(typeof tmp!='undefined'&&tmp&&tmp.length>0){var o=string2Object(tmp);if(typeof o!='undefined')
return o.data;else
return false;return o.data;}}else{var tmp=getCookie(name);if(typeof tmp!='undefined'&&tmp&&tmp.length>0){var o=string2Object(tmp);if(typeof o!='undefined')
return o.data;else
return false;return o.data;}}},_storeString:function(name,data){var _obj={'type':'string','data':data};var tmp_str=object2String(_obj);if(this._mode=='DOM'){globalStorage[this._storageName][name]=tmp_str;}else if(this._mode=='userData'){this._storageElem.setAttribute(name,tmp_str);this._storageElem.save(this._storageName);}else{var Expires=new Date();Expires.setTime(Expires.getTime()+max_cookie_life);setCookie(name,tmp_str,Expires.toGMTString(),'/');}},_getString:function(name){if(this._mode=='DOM'){return String(globalStorage[this._storageName][name]);}else if(this._mode=='userData'){return this._storageElem.getAttribute(name);}else{return getCookie(name);}},set:function(name,data,dtype){if(!this.initialized){domReady(function(){portal.storage.set(name,data,dtype);});return false;}
if(typeof dtype!="undefined"){switch(dtype){case'array':case'object':this._storeObject(name,data,dtype);break;default:this._storeString(name,data);}}else{if(typeof data=='object'&&data){this._storeObject(name,data,'object');}else if(typeof data=='array'&&data){this._storeObject(name,data,'array');}else
this._storeString(name,data);}},get:function(name,dtype){if(!this.initialized){domReady(function(){return portal.storage.get(name,dtype);});return false;}
if(typeof dtype!="undefined"){switch(dtype){case'array':case'object':return this._getObject(name,dtype);break;default:return this._getObject(name);}}else{return this._getObject(name);}},remove:function(name){if(!this.initialized){domReady(function(){portal.storage.remove(name);});return false;}
if(this._mode=='DOM'){delete globalStorage[this._storageName][name];}else if(this._mode=='userData'){this._storageElem.removeAttribute(name);this._storageElem.save(this._storageName);}else{var Expires=new Date();Expires.setTime(Expires.getTime()-max_cookie_life);setCookie(name,'',Expires.getTime(),'/');}}}
function oPortal(){var cselection=null;var cselector=null;var oPortalInstance={_obj:null,_is_init:false,mess:{},vars:{},storage:{},event:{},lang_id:null,lang_nick:null,_hash:{},_init:function(){if(window.mess){this.mess=mess;}
if(window.pphplangs){this.vars.langs=pphplangs;}
if(window.JsFriendly){this.vars.friendlyURL=window.JsFriendly;}else{if(/\w+\.php/i.test(document.location.href))
this.vars.friendlyURL=false;else
this.vars.friendlyURL=true;}
if(window.lang_nick){this.lang_nick=lang_nick;}else{if(this.vars.friendlyURL){this.lang_nick=document.location.href.match(/\/lang\/(\w+)/i);}else{this.lang_nick=document.location.href.match(/\/lang=(\w+)/i);}
if(this.lang_nick){this.lang_nick=this.lang_nick[1];}}
if(window.lang_id){this.lang_id=window.lang_id;}else if(this.vars.langs){if(this.lang_nick){var f_lang=0;for(var i in this.vars.langs){if(!f_lang)f_lang=i;if(this.vars.langs[i]['title']==this.lang_nick){this.lang_id=i;break;}}}
if(!this.lang_id)
this.lang_id=f_lang;}
this.storage=new oStorage();this.regulars=regulars;if(this.storage.initialized){if(this.storage.get('refferer')&&this.storage.get('refferer').toLowerCase()!=document.URL.toLowerCase()){this.storage.set('old_refferer',this.storage.get('refferer'));}
this.storage.set('refferer',document.URL);}else{var aportal=this;syncEvent(function(){if(aportal.storage.get('refferer')&&aportal.storage.get('refferer')!=document.URL){aportal.storage.set('old_refferer',aportal.storage.get('refferer'));}
aportal.storage.set('refferer',document.URL);},'portal.storage.initialized');}
this.e=this.events;this._is_init=true;},assign:function(obj){if(typeof obj!='undefined')
this._obj=obj;},ready:function(func){domReady(func);},events:{_events_queue:{},attach:function(object,event,handler,useCapture){if(typeof object=="string"){object=$_(object)};if(!object)return false;if(typeof object!='array'&&!(object instanceof Array))
object=[object];for(var i=0,l=object.length;i<l;i++){if(object[i].addEventListener){object[i]['_ev_'+event]=handler;object[i].addEventListener(event,object[i]['_ev_'+event],useCapture?useCapture:false);}else if(object[i].attachEvent){object[i]['_ev_'+event]=function(e){e=e||$p.e.get(e);e.target=e.target||$p.e.getTarget(e);e.which=e.which||$p.e.getKey(e);if(typeof handler=='function'){handler.call(object,e);}};object[i].attachEvent('on'+event,object[i]['_ev_'+event]);}else{object[i]['on'+event]=object[i]['_ev_'+event]=handler;}}},remove:function(object,event,handler){if(typeof object=="string"){object=$_(object);};if(!object)return false;if(typeof object!='array'&&!(object instanceof Array))
object=[object];for(var i=0,l=object.length;i<l;i++){if(object[i].removeEventListener){object[i].removeEventListener(event,handler?handler:object[i]['_ev_'+event],false);}else if(object[i].detachEvent){try{if(typeof handler!="undefined")
object[i].detachEvent('on'+event,handler);else if(object[i]['_ev_'+event]!=null){object.detachEvent('on'+event,object[i]['_ev_'+event]);}}catch(e){console.log(e);}}else object[i]['on'+event]=false;}},stop:function(event){var event=event?event:window.event;if(event.preventDefault){event.preventDefault();event.stopPropagation();}else{event.returnValue=false;event.cancelBubble=true;}
return false;},get:function(e){if(!e)var e=window.event;return e;},getTarget:function(event){var targ;event=$p.e.get(event);if(event.target)targ=event.target;else if(event.srcElement)targ=event.srcElement;if(typeof targ!='undefined'&&targ.nodeType==3)
targ=targ.parentNode;return targ;},getKey:function(event){return event.which?event.which:event.keyCode;},attachUnload:function(handler){if(typeof window.onbeforeunload!='function'){var fireUnload=function(e){var e=e||window.event;var ret='',sub_ret='';if($p.e._events_queue['unload']!=null){for(var i in $p.e._events_queue['unload']){sub_ret=$p.e._events_queue['unload'][i](e);if(sub_ret!==true)
ret+=sub_ret;}}
if(ret!=''&&typeof e!='undefined'){e.returnValue=ret;return ret;}}
$p.e._events_queue['unload']=new Array;var queue_id=1;$p.e._events_queue['unload'][queue_id]=handler;window.onbeforeunload=fireUnload;}
else{var queue_id=$p.e._events_queue['unload'].length;$p.e._events_queue['unload'][queue_id]=handler;}
return queue_id;},removeUnload:function(ticket){if(typeof $p.e._events_queue['unload'][ticket]=='function')
delete $p.e._events_queue['unload'][ticket];},attachLoad:function(handler){if(typeof $p.e._events_queue['load']=='undefined'){var fireLoad=function(e){var e=e||window.event;var ret='',sub_ret='';if($p.e._events_queue['load']!=null){for(var i in $p.e._events_queue['load']){sub_ret=$p.e._events_queue['load'][i](e);if(sub_ret!==true)
ret+=sub_ret;}}
if(ret!=''&&typeof e!='undefined'){e.returnValue=ret;return ret;}}
$p.e._events_queue['load']=new Array;var queue_id=1;if(typeof window.onload=='function'){$p.e._events_queue['load'][queue_id]=window.onload;queue_id++;}
$p.e._events_queue['load'][queue_id]=handler;window.onload=fireLoad;}
else{var queue_id=$p.e._events_queue['load'].length;$p.e._events_queue['load'][queue_id]=handler;}
return queue_id;},defPosition:function(event){var x=0,y=0;if(document.attachEvent!=null){x=event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft;y=event.clientY+document.documentElement.scrollTop+document.body.scrollTop;}
if(!document.attachEvent&&document.addEventListener){x=event.clientX+window.scrollX;y=event.clientY+window.scrollY;}
return{x:x,y:y};},addBlock:function(){window['bubble_block']=true;},hasBlock:function(){if(window['bubble_block']){window['bubble_block']=false;return false;}else{return true;}},blockSelect:function(parent){if(typeof parent=='undefined'||!parent){parent=document;};var els=getLikeElements(null,null,null,parent);if(els.length>0){for(var i in els){els[i].onselectstart=function(){return false;};els[i].unselectable="on";if(typeof els[i].style=='undefined'||!els[i].style){els[i].style={};}
if(typeof els[i].style!='undefined'){els[i].style.MozUserSelect='none';els[i].style.KhtmlUserSelect='none';els[i].style.UserSelect='none';}}}},unblockSelect:function(parent){if(typeof parent=='undefined'||!parent){parent=document;};var els=getLikeElements(null,null,null,parent);if(els.length>0){for(var i in els){els[i].onselectstart=function(){};els[i].unselectable="off";if(typeof els[i].style=='undefined'||!els[i].style)
els[i].style={};if(typeof els[i].style!='undefined'){els[i].style.MozUserSelect='auto';els[i].style.KhtmlUserSelect='auto';els[i].style.UserSelect='auto';}}}}},debug:{_level_del:"\t",_var_dump:function(data,level){if(parseInt(level.length/portal.debug._level_del.length)>4){return'...'};var out=level+"";try{if(typeof data!="object"&&data!="array"){out+=data+"\r\n";}else if(typeof data=="object"){out+="{\r\n";for(var i in data){if(typeof data[i]=="object"||typeof data[i]=="array")
out+=i+" : "+portal.debug._var_dump(data[i],level+portal.debug._level_del);else
out+=i+"="+data[i]+"\r\n";}
out+=" }\r\n";}else if(typeof data=="array"){out+="[\r\n";for(var i=0,cnt=data.length;i<cnt;i++){if(typeof data[i]!="string")
out+=i+" : "+portal.debug._var_dump(data[i],level+portal.debug._level_del);else
out+=data[i]+"\r\n";}
out+=" ]\r\n";}}catch(e){}finally{return out;}},dump:function(data,inline){var out=portal.debug._var_dump(data,"");if(typeof inline!='undefined'&&inline){var ele=elem('pre',false,false,false);if(ele){ele.innerHTML=out;document.body.appendChild(ele);}}else if(typeof console=='object'&&typeof console.log=='function'){console.log(out);}else{alert(out);}}},dom:{appendAfter:function(obj,node){if(typeof obj=="string"){obj=$_(obj);};if(obj.nextSibling){obj.parentNode.insertBefore(node,obj.nextSibling);}else{obj.parentNode.appendChild(node);}},pos:function(obj){if(typeof obj=="string"){obj=$_(obj);};if(!obj)return{};var __isIE=navigator.appVersion.match(/MSIE/);var __userAgent=navigator.userAgent;var __isFireFox=__userAgent.match(/firefox/i);var __isFireFoxOld=__isFireFox&&(__userAgent.match(/firefox\/2./i)||__userAgent.match(/firefox\/1./i));var __isFireFoxNew=__isFireFox&&!__isFireFoxOld;var x=0,y=0,h=0,w=0;var source=obj;w=obj.offsetWidth;h=obj.offsetHeight;while(obj!=null){if(typeof obj=='undefined'||obj==null||obj==window.document)break;if(typeof obj.offsetLeft!='undefined'){x+=obj.offsetLeft;y+=obj.offsetTop;}
if((getStyle(obj,'position')=='absolute'||getStyle(obj,'position')=='relative')){obj=typeof obj.offsetParent!='undefined'&&obj.offsetParent!=null?obj.offsetParent:(typeof obj.parentNode!='undefined'?obj.parentNode:null);}else if(getStyle(obj,'position')!='fixed'){obj=typeof obj.offsetParent!='undefined'&&obj.offsetParent!=null?obj.offsetParent:(typeof obj.parentNode!='undefined'?obj.parentNode:null);}else{obj=null;}}
var sY=self.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||(document.body&&document.body.scrollTop);var sX=self.pageXOffset||(document.documentElement&&document.documentElement.scrollLeft)||(document.body&&document.body.scrollLeft);while(source){if(typeof source=='undefined'||source==null||source==window.document)break;if(typeof source.scrollLeft!='undefined'){sX+=source.scrollLeft;sY+=source.scrollTop;}
if(source&&getStyle(source,'position')!='fixed')
source=source.parentNode;else
source=false;}
return{'x':x,'scrollX':sX,'y':y,'scrollY':sY,'h':h,'w':w};},getInPos:function(obj,eX,eY,cPadding){if(typeof obj=="string"){obj=$_(obj);};var cW=getClientWidth();var cH=getClientHeight();var oW=obj.offsetWidth;var oH=obj.offsetHeight;if(typeof cPadding=="undefined")
cPadding=5;var res={'x':0,'y':0}
if(eX+oW+cPadding>cW&&eX-oW-cPadding>0){res.x=eX-oW-cPadding;}else if(eX+oW+cPadding<=cW){res.x=eX+cPadding;}else{res.x=cW-oW-cPadding;}
if(eY+oH+cPadding>cH&&eY-oH-cPadding>0){res.y=eY-oH-cPadding;}else if(eY+oH+cPadding<=cH){res.y=eY+cPadding;}else{res.y=cH-oH-cPadding;}
return res;},clone:function(source,target,clonePosition){if(typeof source=="string"){source=$_(source);};if(typeof target=="string"){target=$_(target);};if(!source||!target){return null;};for(var i=0,max=source.childNodes.length;i<max;i++){var clone1=source.childNodes[i].cloneNode(true);target.appendChild(clone1);}
if(typeof clonePosition!='undefined'&&clonePosition){target.style.position='absolute';var offsets=portal.dom.pos(source);target.style.top=(offsets['y'])+'px';target.style.left=(offsets['x'])+'px';target.style.width=source.offsetWidth+'px';target.style.height=source.offsetHeight+'px';}},swap:function(element1,element2,moveall){if(typeof element1=="string"){element1=$_(element1);};if(typeof element2=="string"){element2=$_(element2);};if(!element1||!element2){return null;};if(typeof moveall!='undefined'&&typeof moveall!='null'&&moveall){var nextSibling=element1.nextSibling;var parentNode=element1.parentNode;element2.parentNode.replaceChild(element1,element2);parentNode.insertBefore(element2,nextSibling);}else{for(var i=0,max=element1.childNodes.length;i<max;i++){var clone1=element1.childNodes[i].cloneNode(true);var clone2=element2.childNodes[i].cloneNode(true);if(clone1.tagName.toLowerCase()=='select')
var seli1=element1.childNodes[i].selectedIndex;if(clone2.tagName.toLowerCase()=='select')
var seli2=element2.childNodes[i].selectedIndex;var replaced1=element1.replaceChild(clone2,element1.childNodes[i]);var replaced2=element2.replaceChild(clone1,element2.childNodes[i]);if(clone1.tagName.toLowerCase()=='select')
clone1.selectedIndex=seli1;if(clone2.tagName.toLowerCase()=='select')
clone2.selectedIndex=seli2;}}},find:function(exp,parent){var result=[];if(typeof exp=='undefined'){return false;}
if(typeof exp=='object'){return exp;}
if(typeof exp=='string'){exp=trim(exp);var tree=exp.split(',');if(tree&&(typeof tree!='array'&&typeof tree=='object')){tree=[tree];}
if(tree){for(var i=0,l=tree.length;i<l;i++){o=null;if(/^(?:[a-zA-Z]+)?#([a-zA-Z0-9_\-]+)\s?(.*)$/ig.test(exp)){var res=/^(?:[a-zA-Z]+)?#([a-zA-Z0-9_\-]+)(\s?.*)*$/.exec(exp);var o=$_(res[1]);if(o&&typeof res[2]!='undefined'&&trim(res[2])!=''){o=$p.dom.find(res[2],o);}}else if(/^([a-zA-Z]+)?\.([a-zA-Z0-9_\-]+)\s?(.*)$/ig.test(exp)){var res=/^([a-zA-Z]+)?\.([a-zA-Z0-9_\-]+)(\s?.*)*$/.exec(exp);var o=getElementsByClass(res[2],parent,typeof res[1]!='undefined'?res[1]:null);if(o.length>0&&typeof res[3]!='undefined'&&trim(res[3])!=''){o=$p.dom.find(res[3],o);}}else if(/^([a-zA-Z]+)\s?(.*)$/ig.test(exp)){var res=/^([a-zA-Z]+)\s?(.*)$/.exec(exp);var o=getLikeElements(res[1],false,false,parent);if(o.length>0&&typeof res[2]!='undefined'&&trim(res[2])!=''){o=$p.dom.find(res[2],o);}}
if(o){if(typeof o=='array')
result=result.concat(o);else if(typeof o=='object'&&typeof o.nodeType=='undefined'){for(var v in o){result[result.length]=o[v];}}else
result[result.length]=o;}}}}
if(result&&result.length==1)
result=result[0];return result;}},hash:{set:function(hash){document.location.hash=hash;},parse:function(){var result={};var url=document.location.hash;var parameters=url.slice(url.indexOf('#')+1).split('&');if(parameters.length>0){result['url']=parameters[0];for(var i=1;i<parameters.length;i++){var parameter=parameters[i].split('=');result[parameter[0]]=parameter[1];}
var domain;var re=new RegExp('^http:\/\/([^\/]+)','g');if(result['url']&&(domain=result['url'].match(re))){result['domain']=domain[0];result['url']=result['url'].slice(result['domain'].length,result['url'].length);}
this._hash=result;}
return result;},clear:function(){if(document.location.hash)
document.location.hash='none';}},ajax:{load:function(params,callback,nohashadd){var req=new JsHttpRequest();req.onreadystatechange=function(){if(req.readyState==4){if(req.responseJS.status==200){if(typeof req.responseJS.redirect!='undefined'){if(typeof req.responseJS.redirect_type!='undefined'&&req.responseJS.redirect_type=='ajax'){var new_params=params;delete new_params['form'];new_params['url']=req.responseJS.redirect.replace(/#(.*)$/,'');$p.ajax.load(new_params,callback,nohashadd);}else{document.location.href=req.responseJS.redirect.replace(/#(.*)$/,'');}
return;}
if(typeof callback=='function')
callback(req.responseJS.response,params);}}}
var hash=[];(params['pid']?hash[hash.length]='id='+params['id']:'');(params['url']?hash[hash.length]='url='+params['url']:'');(params['domain']?hash[hash.length]='domain='+params['domain']:'');if(!(typeof nohashadd!='undefined'&&nohashadd))
document.location.hash=hash.join('&');var url='/ajax.php';req.open(typeof params['method']!='undefined'&&params['method']=='post'?'POST':'GET',url,true);req.send({'resource':typeof params['resource']!='undefined'&&params['resource']!=null?params['resource']:'content','params':params});},get:function(params){},attachForms:function(container){var forms=$p.dom.find('form.frmAjx');if(forms&&forms.length>0){var _always_submit=false;var sbForm=function(e,container,curr_form){if(_always_submit){return false;}else{if(typeof e.returnValue!='undefined'&&!e.returnValue){e.preventDefault?e.preventDefault():'';return false;}
_always_submit=true;var result=portal.hash.parse();if(!(result['id']||result['url']))
result['url']=curr_form.getAttribute('p-action');var res=curr_form.getAttribute('resource');if(typeof res!='undefined'&&res!=''){result['resource']=res;}
if(result['id']||result['url']){if(forms.length>0){for(var i in forms){$p.e.remove(forms[i],"submit");}}
result['form']=curr_form;result['method']='post';portal.ajax.load(result,container.insert);if(typeof container.clear=='function')
container.clear(null);}}}
function fwk_submit(e){return $p.e.stop(e);}
if(!(forms instanceof Array))
forms=[forms];var bindForm=function(form){form.setAttribute('p-action',form.getAttribute('action'));form.setAttribute('action','');if(navigator.userAgent.toLowerCase().indexOf('webkit')>-1){$p.e.attach(form,'submit',function(e){return fwk_submit(e);});var inputs=getLikeElements('input','type','submit',form);if(inputs&&inputs.length>0){for(var j in inputs){$p.e.attach(inputs[j],'click',function(e){sbForm(e,container,form);return $p.e.stop(e);},false);}}}else{$p.e.attach(form,"submit",function(e){sbForm(e,container,form);return $p.e.stop(e);},false);}}
for(var i=0,l=forms.length;i<l;i++){if(forms[i].getAttribute('binded')==null){bindForm(forms[i]);}}}},checkAjaxPage:function(is_ajax){if(parseInt(is_ajax)==1){top.location.href='/#url='+location.pathname;}}},script:{load:function(src,params){if(typeof params=='undefined'){params={};}
var async_load=function(){var s=document.createElement('script');s.type='text/javascript';if(typeof params!='undefined'&&params.async)
s.async=true;if(typeof params!='undefined'&&params.defer)
s.defer=true;s.src=src;var x=document.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);if(typeof params.callback=='function'){s.onload=params.callback(src,params);if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){var isIE=true;var ieVer=/msie\s(\d)/.exec(navigator.userAgent.toLowerCase());}else
var isIE=false;if(isIE&&parseInt(ieVer[1])<9){s.onreadystatechange=function(){if(this.readyState=='complete'){params.callback(src,params);}}}}}
if(typeof params!='undefined'&&params.async)
$p.e.attachLoad(async_load);else
async_load();}},css:{hasClass:function(ele,cls){if(!ele||ele==null)return false;if(typeof ele=="string"){ele=$_(ele);};if(typeof ele.className!='undefined')
return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));},addClass:function(ele,cls){if(!ele||ele==null)return false;if(typeof ele=="string"){ele=$_(ele);};if(typeof ele!='array'&&!(ele instanceof Array))
ele=[ele];for(var i=0,l=ele.length;i<l;i++){if(!portal.css.hasClass(ele[i],cls))ele[i].className+=" "+cls;}},removeClass:function(ele,cls){if(!ele||ele==null)return false;if(typeof ele=="string"){ele=$_(ele);};if(typeof ele!='array'&&!(ele instanceof Array))
ele=[ele];for(var i=0,l=ele.length;i<l;i++){if(portal.css.hasClass(ele[i],cls)){var reg=new RegExp('(\\s|^)'+cls+'(\\s|$)');ele[i].className=ele[i].className.replace(reg,' ');}}},load:function(src,params){if(src!=''){var cssNode=document.createElement('link');cssNode.type='text/css';cssNode.rel='stylesheet';cssNode.href=src;cssNode.media=typeof params!='undefined'&&params.media?params.media:'all';document.getElementsByTagName("head")[0].appendChild(cssNode);}}},banners:{load:function(id,async){var b_path=domain+'/js/project/banners/'
if(typeof id!='undefined'&&$_('banner'+id)){async=typeof async!='undefined'&&async;var isIE=navigator.appName=='Microsoft Internet Explorer';if((isIE&&!async)||(!isIE&&async))
document.write('<scri'+'pt type="text/javascript" '+(!isIE&&async?'':'')+' src="'+b_path+'banner'+id+'.js"></scri'+'pt>');}},setup:function(){var sandbox='b-banners-sandbox';var isIE=navigator.appName=='Microsoft Internet Explorer';if($('#'+sandbox+' .bs').length>0){$('#'+sandbox+' .bs').each(function(){var id=$(this).attr('id').replace('_in','');if($_(id)){if(!isIE)
$_(id).innerHTML=$(this).html();$_(id).style.display='block';}})}
if($_(sandbox))
$_(sandbox).parentNode.removeChild($_(sandbox));}},print:function(){var dochead=getLikeElements('head');if(dochead&&dochead.length>0){document.location.hash='print';dochead[0].appendChild(elem('link',{'rel':'StyleSheet','href':'/css/project/print-src.css','type':'text/css'}));if(window.print)
window.print();}},session:{_session_name:'webT',_values:false,_init:function(){this._values=portal.storage.get(this._session_name,'object');if(typeof this._values=='undefined'||this._values==false){this._values=new Object();portal.storage.set(this._session_name,this._values,'object');}
if(typeof this._values['switchers']=='undefined'){this._values['switchers']=new Object();this.set('switchers',this._values['switchers']);}},get:function(valueName){if(this._values==false)this._init();this._values=portal.storage.get(this._session_name,'object');if(typeof this._values[valueName]!='undefined'&&this._values[valueName]!=''){return this._values[valueName];}},set:function(valueName,value){if(this._values==false)this._init();this._values=portal.storage.get(this._session_name,'object');this._values[valueName]=value;portal.storage.set(this._session_name,this._values,'object');}},keys:{getCode:function(data){if(typeof data!='undefined'&&$p.isNumeric(data))
return parseInt(data);else if(typeof data=='object'&&data&&(data.which||data.keyCode)){var e=$p.e.get(data);return parseInt($p.e.getKey(e));}else
return false;},isCtrl:function(code){var c=$p.keys.getCode(code);return(c==17);},isEnter:function(code){var c=$p.keys.getCode(code);return(c==13||c==3);},isInteger:function(code){var c=$p.keys.getCode(code);return(c>=48&&c<=57)||(c>=96&&c<=105)||(c==109)||(c==189);},isFloat:function(code){var c=$p.keys.getCode(code);return(c>=48&&c<=57)||(c>=96&&c<=105)||c==110||c==188||c==189||c==190||c==109;},isDatetime:function(code){var c=$p.keys.getCode(code);return(c>=48&&c<=57)||(c>=96&&c<=105)||c==109||c==111||c==59;},isTime:function(code){var c=$p.keys.getCode(code);return(c>=48&&c<=57)||(c>=96&&c<=105)||c==111||c==59;},isText:function(code){var c=$p.keys.getCode(code);return(c>=32&&c<=222)||(c>=1040&&c<=1071)||($p.os.isMacos()&&c==0)||($p.os.isLinux());}},os:{isMacos:function(){return window.navigator.userAgent.indexOf('Macintosh')>=0;},isLinux:function(){return window.navigator.userAgent.indexOf('Linux')>=0&&window.navigator.userAgent.indexOf('Mozilla')>=0;}},serialize:function(_obj){if(typeof _obj.toSource!=='undefined'&&typeof _obj.callee==='undefined'){return _obj.toSource();}
switch(typeof _obj)
{case'number':case'boolean':case'function':return _obj;break;case'string':return'\''+_obj+'\'';break;case'object':var str;if(_obj.constructor===Array||typeof _obj.callee!=='undefined')
{str='[';var i,len=_obj.length;for(i=0;i<len-1;i++){str+=portal.serialize(_obj[i])+',';}
str+=serialize(_obj[i])+']';}
else
{str='{';var key;for(key in _obj){str+=key+':'+portal.serialize(_obj[key])+',';}
str=str.replace(/\,$/,'')+'}';}
return str;break;default:return'UNKNOWN';break;}},unserialize:function(obj){try{eval("var result = "+obj);return result;}catch(e){return false;}},val:function(){if(this._obj&&typeof this._obj=='object'&&typeof this._obj.value!='undefined'){return this._obj.value;}else
return false;},isNumeric:function(v){if(typeof v=='undefined')return false;var z=v.toString();return z.length>0&&!isNaN(z)&&z.search(/[A-Z]|[#]/ig)==-1;},replaceAll:function(val,from,to){if(typeof val=='string')
return val.split(from).join(to);else
return false;},clone:function(obj){return JSON.parse(JSON.stringify(obj));}};if(!oPortalInstance._is_init)
oPortalInstance._init();return oPortalInstance;}
var portal=new oPortal();$p=portal;$p.f=$p.dom.find;function pphpPreLoader(params){this._init(params);}
pphpPreLoader.prototype={_items:null,_mode:'standart',_src:null,_src_mini:null,_loader_name:"loader.gif",_loader_mini_name:"loader_mini.gif",_skin_img_dir:null,_alpha:0.8,_text:'Updating...',_old_height:0,_animate_speed:25,_animate_step:10,_init:function(params){this.addParams(params);this._items={};},addParams:function(params){if(typeof params!="undefined"){for(var i in params){if(typeof this['_'+i]!="undefined")
this['_'+i]=params[i];}
if(!this._skin_img_dir)
this._skin_img_dir=skin_img_dir+share_dir;if(typeof params['skin_img_dir']!='undefined'||typeof params['loader_name']!='undefined'){this._init_images();}}},_init_images:function(){this._src=new Image();this._src_mini=new Image();this._src.src=this._skin_img_dir+this._loader_name;this._src_mini.src=this._skin_img_dir+this._loader_mini_name;},_applyAlpha:function(obj,alpha){if(obj&&obj.style){obj.style.opacity=obj.style["'-khtml-opacity"]=obj.style["-moz-opacity"]=alpha;if(/MSIE/.test(navigator.userAgent)){obj.style.filter=alpha===''?'':"alpha(opacity="+(alpha*100)+")";if(!obj.currentStyle||!obj.currentStyle.hasLayout)
obj.style.display='inline-block';}}},_animate:function(ticket,param,value){var obj=$_('progressbar_'+ticket);if(typeof obj=='object'&&obj!==null){var an=function(){portal.loader._animate(ticket,param,value);}
if(typeof obj.style=='undefined'){setTimeout(an,portal.loader._animate_speed);return;}
if(obj.style[param]=='')obj.style[param]=0;if(parseInt(obj.style[param])<parseInt(value)){var step=parseInt(obj.style[param])+portal.loader._animate_step;step>parseInt(value)?step=parseInt(value):'';obj.style[param]=step+(value.indexOf('%')>=0?'%':'px');setTimeout(an,portal.loader._animate_speed);}else{portal.loader._runCallback(ticket,true);}}},_addCallback:function(ticket,callback){if(this._items[ticket]&&typeof this._items[ticket]['callbacks']=='object'){this._items[ticket]['callbacks'][this._items[ticket]['callbacks'].length]=callback;if(this._items[ticket]['callbacks'].length=='1'){this._runCallback(ticket);}}},_runCallback:function(ticket,clear_last){if(portal.loader._items[ticket]&&typeof portal.loader._items[ticket]['callbacks']=='object'){if(typeof clear_last!='undefined'&&clear_last){var newarr=[];for(var i=1;i<portal.loader._items[ticket]['callbacks'].length;i++){newarr[i-1]=portal.loader._items[ticket]['callbacks'][i];}
portal.loader._items[ticket]['callbacks']=newarr;}
if(typeof this._items[ticket]['callbacks'][0]=='function'){this._items[ticket]['callbacks'][0]();}}},_correctPos:function(ticket,self,mode){if(typeof self=='undefined'||!self)
self=this;var scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;switch(mode){case'float':case'progress':var layer_bg=$_('loader_'+ticket);layer_bg.style.width=layer_bg.parentNode.scrollWidth+'px';layer_bg.style.height=(layer_bg.parentNode.tagName=='BODY'?getDocumentHeight():layer_bg.parentNode.offsetHeight)+'px';if(layer_bg.parentNode.tagName=='BODY'){var cY=getClientHeight();self._items[ticket]['loader_obj'].style.top=(scrollTop+(cY-self._items[ticket]['loader_obj'].offsetHeight)/2)+'px';}
break;case'float-mini':$_('loader_'+ticket).style.top=scrollTop+'px';break;default:break;}},create:function(objid,params){this.addParams(params);if(this._src==null){this._init_images();}
var tmpdt=new Date;var ticket=tmpdt.getTime();var tmode=(typeof params!="undefined"&&params.mode?params.mode:this._mode);var alpha=(typeof params!="undefined"&&params.alpha?params.alpha:this._alpha);var obj=((typeof(objid)).toLowerCase()=="string"?$_(objid):((typeof(objid)).toLowerCase()=='object'&&objid!=null?objid:document.body));if(!obj)
return false;this._items[ticket]={'mode':tmode,'owner':obj};this._old_height=obj.offsetHeight;switch(tmode){case'float':case'float-mini':var el=elem('div',{'class':(tmode=='float'?'loader-abs':'loader-mini-abs'),'id':'loader_'+ticket});var el_inn=elem('div',{});this._applyAlpha(el_inn,alpha);el.appendChild(el_inn);var ld_obj=elem('img',{'src':this._src.src,'class':'ldr'});this._items[ticket]['loader_obj']=ld_obj;el.appendChild(ld_obj);if(tmode=='float-mini'){el.appendChild(elem('span',false,false,this._text));}
obj.appendChild(el);this._correctPos(ticket,this,tmode);break;case'mini':obj.innerHTML='<span class="loader" id="loader_'+ticket+'"><img src="'+this._src_mini.src+'" class="ldr" /></span>';break;case'progress':var el=elem('div',{'class':'loader-abs','id':'loader_'+ticket});var el_inn=elem('div',{});this._applyAlpha(el_inn,alpha);el.appendChild(el_inn);var el_inn=elem('ins',{'class':'progressbar'});this._items[ticket]['loader_obj']=el_inn;el_inn.appendChild(elem('del',{'id':'progressbar_'+ticket}));el.appendChild(el_inn);obj.appendChild(el);this._correctPos(ticket,this,tmode);if(typeof params!='undefined'&&typeof params['ajaxinstance']=='object'&&typeof params['ajaxinstance'].onreadystatechange=='function'){this._items[ticket]['_ajaxinstance']=params['ajaxinstance'];this._items[ticket]['_ajaxstate']=0;this._items[ticket]['callbacks']=[];this._items[ticket]['_ajaxinstancecallback']=this._items[ticket]['_ajaxinstance'].onreadystatechange;var athis=this;this._items[ticket]['_ajaxinstance'].onreadystatechange=function(){if(athis._items[ticket]['_ajaxinstance'].readyState>athis._items[ticket]['_ajaxstate']){athis._items[ticket]['_ajaxstate']=athis._items[ticket]['_ajaxinstance'].readyState;athis._addCallback(ticket,function(){athis._animate(ticket,'width',parseInt(athis._items[ticket]['_ajaxstate'])*25+'%');});if(typeof athis._items[ticket]['_ajaxinstancecallback']=='function'){athis._items[ticket]['_ajaxinstancecallback']();}}}}
break;case'standart':default:obj.innerHTML='<div class="loader" id="loader_'+ticket+'"><img src="'+this._src.src+'" class="ldr" /></div>';break;}
return ticket;},destroy:function(ticket){if(this._items[ticket]){switch(this._items[ticket].mode){case'float':case'float-mini':this._items[ticket].owner.removeChild($_('loader_'+ticket));delete this._items[ticket];break;case'progress':var athis=this;this._addCallback(ticket,function(){athis._items[ticket].owner.removeChild($_('loader_'+ticket));delete athis._items[ticket];});break;case'standart':default:this._items[ticket].owner.innerHTML='';delete this._items[ticket];break;}
return null;}},getInstance:function(ticket){if(typeof this._items[ticket]!='undefined')
return this._items[ticket];else
return false;}}
portal.loader=new pphpPreLoader({'mode':'standart'});function oPopupLayer(params){this._init(params);oPopupLayer.Instances[0]=this;}
oPopupLayer.prototype={_layer:null,_layer_bg:null,_main_layer:null,_el_title:null,_el_content:null,_el_response:null,_insert_callback:null,_destroy_callback:null,_nobutton:false,_loader:null,_alpha:10,_correctPosAfter:true,_noinner:false,_doch:0,_window:null,_init:function(params){this.addParams(params);},addParams:function(params){if(typeof params!='undefined'&&params!=null){for(var i in params){if(typeof this['_'+i]!='undefined'){this['_'+i]=params[i];}}}},_updateWindowProps:function(){if(this._window){if(typeof this._window['width']!='undefined'){this._main_layer.style.width=this._window['width']+'px';this._main_layer.style.marginLeft=-(this._window['width']/2)+'px';}
if(typeof this._window['height']!='undefined'){this._main_layer.style.height=this._window['height']+'px';}
if(typeof this._window['title_class']!='undefined')
portal.css.addClass(this._el_title,this._window['title_class']);}},create:function(e,data){var ev=window.event?window.event:e;var cX=getClientWidth();var cY=getClientHeight();var scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;scrollTop=0;this._layer_bg=elem('div',{'class':'b-lightbox','id':'webt-lightbox'});var el_img=elem('img',{'src':'/skin/img/share/0.gif'});this._layer_bg.appendChild(el_img);this._layer_bg.style.opacity=this._layer_bg.style["-khtml-opacity"]=this._layer_bg.style["-moz-opacity"]=this._alpha;if(/MSIE/.test(navigator.userAgent)){this._layer_bg.style.filter=this._alpha===''?'':"this._alpha(opacity="+(this._alpha*100)+")";if(!this._layer_bg.currentStyle||!this._layer_bg.currentStyle.hasLayout)
this._layer_bg.style.display='inline-block';}
this._main_layer=elem('div',{'id':'b-lightbox-outer','class':'b-lightbox-outer'},{'left':0+'px','top':0+'px'});var el_close=elem('div',{'class':'close','id':'b-btn-close'},false,this._window&&typeof this._window['close_text']!='undefined'?this._window['close_text']:'');if(typeof this._noinner=='undefined'||!this._noinner)
this._layer=elem('div',{'class':'b-lightbox-inner'});else
this._layer=elem('div',{'class':'b-lightbox-inner b-no-p'});this._layer.appendChild(elem('div',{'class':'b-lightbox-lt'}));this._layer.appendChild(elem('div',{'class':'b-lightbox-rt'}));var lc=elem('div',{'class':'b-lightbox-lc'});var c=elem('div',{'class':'b-lightbox-rc'});lc.appendChild(c);this._layer.appendChild(lc);this._layer.appendChild(elem('div',{'class':'b-lightbox-lb'}));this._layer.appendChild(elem('div',{'class':'b-lightbox-rb'}));var athis=this;portal.events.attach(this._layer_bg,"mousedown",function(){athis.destroy(athis);});portal.events.attach(el_close,"mousedown",function(){athis.destroy(athis);});if(!this._noinner){this._el_title=elem('h1',{'id':'l-ttl'},{'display':'none'});this._el_content=elem('div',{'class':'content scroll-pane b-popup-body','id':'l-content'});c.appendChild(this._el_title);c.appendChild(this._el_content);}else if(typeof data!='undefined'&&data){this._layer.appendChild(data);}
this._main_layer.appendChild(this._layer);if(!this._nobutton)
this._main_layer.appendChild(el_close);this._layer_bg.style.width=el_img.style.width=document.body.scrollWidth+'px';this._layer_bg.style.height=el_img.style.height=getDocumentHeight()+'px';this._updateWindowProps();this._main_layer.style.left=(cX-this._main_layer.offsetWidth)/2+'px';this._main_layer.style.top=(scrollTop+(cY-this._main_layer.offsetHeight)/2-80)+'px';document.body.appendChild(this._layer_bg);document.body.appendChild(this._main_layer);if(this._correctPosAfter){this._correctPos(this);}
this.clear(e);},insert:function(data,callback){var athis=this;if(typeof athis._noinner=='undefined')
athis=oPopupLayer.Instances[0];if(athis._loader)portal.loader.destroy(athis._loader);athis._el_response=data;if(!athis._noinner&&typeof data!='undefined'){if(typeof data.title=='object')
athis._el_title.appendChild(data.title);else
athis._el_title.innerHTML=data.title;athis._el_title.style.display='';if(typeof data.content=='object'){if(typeof data.content.content!='undefined'&&data.content.content){athis._el_content.innerHTML=data.content.content;}else
athis._el_content.appendChild(data.content);}else
athis._el_content.innerHTML=data.content;}
if(athis._correctPosAfter)
athis._correctPos(athis);if(typeof athis._insert_callback=='function')
athis._insert_callback(athis);},_correctPos:function(self){if(typeof self=='undefined'||!self)
self=this;if(self._doch==0)
self._doch=getDocumentHeight();var correctHeight=(self._window&&(typeof self._window.correctHeight=='undefined'||(typeof self._window.correctHeight!='undefined'&&self._window.correctHeight)));if(correctHeight){self._main_layer.style.height='auto';if(!self._noinner)self._el_content.style.height='auto';}
var cY=getClientHeight();var scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;scrollTop=0;if(self._main_layer.offsetHeight>(self._doch-60)){if(correctHeight){self._main_layer.style.height=(self._doch-60)+'px';}
self._main_layer.style.top=20+'px';if(typeof $!='undefined'&&typeof $.scrollTo=='function')
$.scrollTo('#b-btn-close','fast');}else if(self._main_layer.offsetHeight>(getClientHeight()-20)){var new_y=scrollTop+(cY-self._main_layer.offsetHeight/2)/2-10;if(new_y<0)
new_y=(self._main_layer.offsetHeight/2+30);self._main_layer.style.top=new_y+'px';$.scrollTo('#b-btn-close','fast');}else{self._main_layer.style.top=(scrollTop+(cY-self._main_layer.offsetHeight)/2-30)+'px';}},clear:function(e){if(this._el_title!=null){this._el_title.innerHTML='';this._el_title.style.display='none';}
if(this._el_content!=null)
this._loader=portal.loader.create(this._el_content,{"mode":"standart",'loader_name':'loader.gif'});},destroy:function(owner){if(typeof owner=='undefined')
owner=this;if(owner._layer_bg){owner._layer_bg.parentNode.removeChild(owner._layer_bg);owner._layer_bg=null;owner._main_layer.parentNode.removeChild(owner._main_layer);owner._main_layer=null;portal.hash.clear();if(typeof owner._destroy_callback=='function'){owner._destroy_callback(owner);}}},getContent:function(){return this._el_content;},getResponse:function(){return this._el_response;}}
oPopupLayer.Instances=new Array();function $_(objid){if(typeof objid=='object'&&objid&&objid.nodeName)
return objid;else
return document.getElementById(objid);}
var myWindow;function show(url,wi,he,title_win,full){if(myWindow!=null){myWindow.close();myWindow=null;}
var lpos=(screen.width)?(screen.width-wi)/2:0;var tpos=(screen.height)?(screen.height-he)/2:0;myWindow=window.open(url,title_win,"top="+tpos+",left="+lpos+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,personalbar=no,resizable=no,width="+wi+",height="+he+",outerheight=0,outerwidth=0");myWindow.focus();}
function show_resized(url,wi,he,title_win){if(myWindow!=null){myWindow.close();myWindow=null;}
if(wi=='auto'&&he=='auto'){myWindow=window.open(url,null);}else{if(wi=='auto')
wi=screen.width;if(he=='auto')
he=screen.height;var lpos=(screen.width)?(screen.width-wi)/2:0;var tpos=(screen.height)?(screen.height-he)/2:0;myWindow=window.open(url,null,"top="+tpos+",left="+lpos+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,personalbar=no,resizable=yes,width="+wi+",height="+he+",outerheight=0,outerwidth=0");}}
function show_resized_scroll(url,wi,he,title_win){if(myWindow!=null){myWindow.close();myWindow=null;}
var lpos=(screen.width)?(screen.width-wi)/2:0;var tpos=(screen.height)?(screen.height-he)/2:0;myWindow=window.open(url,title_win,"top="+tpos+",left="+lpos+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,personalbar=no,resizable=yes,width="+wi+",height="+he+",outerheight=0,outerwidth=0");}
function sethome(o,siteurl,sitename){var name=navigator.appName;var useragent=navigator.userAgent;var version=parseInt(navigator.appVersion);var needtoknow=1;if(useragent.indexOf("MSIE")!=-1){var index=navigator.userAgent.indexOf("MSIE ");if(index!=-1){version=parseInt(navigator.userAgent.substring(index+5,index+6));}
if(version>4){o.style.behavior='url(#default#homepage)';o.setHomePage(siteurl);needtoknow=0;}}}
function right_escape(s){var res="";for(var i=0,cnt=s.length;i<cnt;i++){res+=s.charAt(i);}
return res;}
function getClientWidth(is_top){var bOpera=false,ver=navigator.appVersion.match("^[0-9\.]+");if(window.opera&&parseFloat(ver)<9)
bOpera=true;if(typeof is_top!='undefined'&&is_top){var curr_frame=top.document;}else
var curr_frame=document;return document.compatMode=='CSS1Compat'&&!window.opera?curr_frame.documentElement.clientWidth:curr_frame.body.clientWidth;}
function getClientHeight(is_top){var ua=navigator.userAgent.toLowerCase();var bOpera=false;var ver=navigator.appVersion.match("^[0-9\.]+");if(window.opera&&parseFloat(ver)<9)
bOpera=true;var isIE=(!bOpera&&ua.indexOf('msie')>-1);if(typeof is_top!='undefined'&&is_top){var curr_frame=top.document;}else
var curr_frame=document;return((document.compatMode||isIE)&&!bOpera)?(document.compatMode=='CSS1Compat')?curr_frame.documentElement.clientHeight:curr_frame.body.clientHeight:(curr_frame.parentWindow||curr_frame.defaultView).innerHeight;}
function getDocumentHeight(is_top){return Math.max(document.compatMode!='CSS1Compat'?document.body.scrollHeight:document.documentElement.scrollHeight,getClientHeight(is_top));}
function getScrollbarWidth(){document.body.style.overflow='hidden';var width=document.body.clientWidth;document.body.style.overflow='scroll';width-=document.body.clientWidth;if(!width)width=document.body.offsetWidth-document.body.clientWidth;document.body.style.overflow='';return width;}
function addToJson(json,elemname,value){json[elemname]=value;}
function removeFromJson(json,elemname){delete json[elemname];}
function jsonLen(json){var len=0;if(typeof json=='object'){for(var i in json){len++;}}
return len;}
function getStyle(el,styleProp){var x=typeof el=='string'?document.getElementById(el):el;if(x){var hacktable={};if(styleProp=='border-width'){if(window.getComputedStyle){var cstyle=document.defaultView.getComputedStyle(x,null).getPropertyValue('border-right-width')?'border-right-width':'border-width-right';}
hacktable['border-width']={'currentStyle':'borderWidth','getComputedStyle':cstyle};}
if(typeof x.currentStyle!='undefined'&&typeof x.currentStyle!='null'){styleProp=styleProp.replace(/\-([^-])?/,function(s){return s.toUpperCase()}).replace(/\-/,'');var y=x.currentStyle[(typeof hacktable[styleProp]!='undefined'?hacktable[styleProp]['currentStyle']:styleProp)];}else if(window.getComputedStyle){var y=document.defaultView.getComputedStyle(x,null).getPropertyValue((typeof hacktable[styleProp]!='undefined'?hacktable[styleProp]['getComputedStyle']:styleProp));}}
return y;}
function getLikeElements(tagName,attrName,attrValue,parent){var startSet;var endSet=new Array();if(typeof parent=='undefined'||!parent)
parent=document;if(typeof parent!='array'&&!(parent instanceof Array))
parent=[parent];for(var z=0,l=parent.length;z<l;z++){if(typeof tagName!='undefined'&&tagName){startSet=parent[z].getElementsByTagName(tagName);}else{startSet=(parent[z].all&&!window.opera)?parent[z].all:parent[z].getElementsByTagName("*");if(!(typeof attrName!='undefined'&&attrName))
return startSet;}
if(typeof attrName!='undefined'&&attrName){for(var i=0;i<startSet.length;i++){if(startSet[i]&&startSet[i].getAttribute(attrName)){if(typeof attrValue!='undefined'&&attrValue){if(startSet[i]&&startSet[i].getAttribute(attrName)==attrValue){endSet[endSet.length]=startSet[i];}}else{endSet[endSet.length]=startSet[i];}}}}else{if(startSet){if(typeof startSet=='array')
endSet=endSet.concat(startSet);else if(typeof startSet=='object'){for(var i in startSet){if(typeof startSet[i]=='object')
endSet[endSet.length]=startSet[i];}}}}}
return endSet;}
function getElementsByClass(searchClass,node,tag){var classElements=new Array();if(node==null||!node)
node=document;if(tag==null)
tag='*';if(typeof node!='array'&&!(node instanceof Array))
node=[node];var cc=0;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(var z=0,x=node.length;z<x;z++){var els=node[z].getElementsByTagName(tag);var elsLen=els.length;for(var i=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[cc]=els[i];cc++;}}}
return classElements;}
function timeSource(){var x=new Date(timeNow().getUTCFullYear(),timeNow().getUTCMonth(),timeNow().getUTCDate(),timeNow().getUTCHours(),timeNow().getUTCMinutes(),timeNow().getUTCSeconds());x.setTime(x.getTime()+10800000);return x;}
function timeNow(){return new Date();}
function leadingZero(x){return(x>9)?x:'0'+x;}
function displayTime(){$_('disp').innerHTML=eval(outputTime);setTimeout('displayTime()',1000);}
var outputTime="leadingZero(timeSource().getHours())+':'+leadingZero(timeSource().getMinutes())+':'+leadingZero(timeSource().getSeconds())";function strt(){displayTime();}
function bookmark(){var title=document.title;var url=location.href;if(window.sidebar)
window.sidebar.addPanel(title,url,"");else if(window.opera&&window.print)
{var mbm=document.createElement('a');mbm.setAttribute('rel','sidebar');mbm.setAttribute('href',url);mbm.setAttribute('title',title);mbm.click();}
else if(document.all)window.external.AddFavorite(url,title);}
var CheckKeyCodePgr=function(event,uid){if({13:1}[event.which||event.keyCode]){return eval("pager_on_chg"+uid);}
keycode=event.which?event.which:event.keyCode;if((keycode>=48&&keycode<=57)||(keycode>=37&&keycode<=40)||keycode==8){return true;}else{return false;}};var CheckKeyCodePgrAjx=function(event,uid){if({13:1}[event.which||event.keyCode]){updPage($_("newppage"+uid).value);return false;}
keycode=event.which?event.which:event.keyCode;if((keycode>=48&&keycode<=57)||(keycode>=37&&keycode<=40)||keycode==8){return true;}else{return false;}};function sbmtKeyChecker(event,func){if({13:1}[event.which||event.keyCode]){eval(func);return false;}}
function showHide(oId,closeOnOutClick,callback){if(typeof oId!='object')
var aObj=$_(oId);else
var aObj=oId;if(aObj){if(aObj.style.display=='none'){aObj.style.display='';if(typeof closeOnOutClick!="undefined"&&closeOnOutClick){setTimeout("portal.events.attach(document, 'mouseup', function (evt){showHide('"+aObj.id+"', "+closeOnOutClick+")});",200);}}else{aObj.style.display='none';if(typeof closeOnOutClick!="undefined"&&closeOnOutClick){portal.events.remove(document,'mouseup');}}
if((typeof callback).toLowerCase()=="function"){callback();}
if(window.opera)
document.body.style+='';return aObj.style.display;}}
function Hide(oId){var aObj=$_(oId);aObj.style.display='none';}
function sw_tab(aobj,holder){var j=0;var obj=$_(aobj);while($_(holder+"_"+j)){if($_(holder+"_"+j)!=obj){portal.css.removeClass(holder+"_"+j,'active');}else{}
j++;}
if(obj){portal.css.addClass(obj,'active');obj.blur();}
return false;};function switchTab(aobj,holder){var j=0;var obj=$_(aobj);var imgTabs=new Array();imgTabs[0]=new Image();imgTabs[0].src=skin_img_dir+'l_options_agreed.gif';imgTabs[1]=new Image();imgTabs[1].src=skin_img_dir+'l_options_agreed_off.gif';if(typeof obj!="undefined"&&obj){while(typeof $_(holder+"_"+j)!="undefined"&&$_(holder+"_"+j)){if($_(holder+"_"+j)==obj){var tmp_state=showHide(holder+"_"+"h_"+j);var switchers=portal.session.get('switchers');if(typeof switchers=="undefined")
var switchers=new Object;switchers[aobj]={'func':'switchTab','params':[aobj,holder],'initstate':'none','currstate':tmp_state};portal.session.set('switchers',switchers);var switchers=portal.session.get('switchers');if(tmp_state=='none'){obj.src=imgTabs[1].src;}else{obj.src=imgTabs[0].src;}
return false;}
j++;}
obj.blur();}
return false;}
function unSwitcher(){var tmp=portal.session.get('switchers');if(tmp!=undefined){for(var i in tmp){if(eval('window.'+tmp[i].func)&&tmp[i].initstate!=tmp[i].currstate){var params='';for(var j in tmp[i].params){params+="'"+tmp[i].params[j]+"',";}
if(params!=''){params=params.substring(0,params.length-1);}
eval(tmp[i].func+"("+params+")");}}}}
function trim(str,chars){if(typeof str!='undefined'){var whitespace=' \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000';for(var i=0;i<str.length;i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);break;}}
for(i=str.length-1;i>=0;i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);break;}}
return whitespace.indexOf(str.charAt(0))===-1?str:'';}else
return'';}
function ltrim(str,chars){chars=chars||"\\s\\n\\r\\0\\x0B\\t";return str.replace(new RegExp("^["+chars+"]+","g"),"");}
function rtrim(str,chars){chars=chars||"\\s\\n\\r\\0\\x0B\\t";return str.replace(new RegExp("["+chars+"]+$","g"),"");}
function strip_tags(str,allowed_tags){var key='',allowed=false;var matches=[];var allowed_array=[];var allowed_tag='';var i=0;var k='';var html='';var replacer=function(search,replace,str){return str.split(search).join(replace);};if(allowed_tags){allowed_array=allowed_tags.match(/([a-zA-Z0-9]+)/gi);}
str+='';matches=str.match(/(<\/?[\S][^>]*>)/gi);for(key in matches){if(isNaN(key)){continue;}
html=matches[key].toString();allowed=false;for(k in allowed_array){allowed_tag=allowed_array[k];i=-1;if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+'>');}
if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+' ');}
if(i!=0){i=html.toLowerCase().indexOf('</'+allowed_tag);}
if(i==0){allowed=true;break;}}
if(!allowed){str=replacer(html,"",str);}}
return str;};function isEmpty(test_str){if(test_str!=null&&test_str!=""){if(test_str===true)return false;for(var i=0,cnt=test_str.length;i<cnt;i++){if(test_str.charAt(i)!=" "){return false;}}
return true;}else{return true;}}
function crc32(str){function utf8_encode(argString){var string=(argString+'');var utftext="";var start,end;var stringl=0;start=end=0;stringl=string.length;for(var n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++;}else if(c1>127&&c1<2048){enc=String.fromCharCode((c1>>6)|192)+String.fromCharCode((c1&63)|128);}else{enc=String.fromCharCode((c1>>12)|224)+String.fromCharCode(((c1>>6)&63)|128)+String.fromCharCode((c1&63)|128);}
if(enc!==null){if(end>start){utftext+=string.substring(start,end);}
utftext+=enc;start=end=n+1;}}
if(end>start){utftext+=string.substring(start,string.length);}
return utftext;}
str=utf8_encode(str);var table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";var crc=0;var x=0;var y=0;crc=crc^(-1);for(var i=0,iTop=str.length;i<iTop;i++){y=(crc^str.charCodeAt(i))&0xFF;x="0x"+table.substr(y*9,8);crc=(crc>>>8)^x;}
crc=crc^(-1)
if(crc<0){crc+=4294967296}
return crc;}
function clone(obj){var newObj=(obj instanceof Array)?[]:{};for(i in obj){if(i=='clone')continue;if(obj[i]&&typeof obj[i]=="object"){newObj[i]=clone(obj[i]);}else
newObj[i]=obj[i];}return newObj;}
function selectText(el){if(document.selection){var range=document.body.createTextRange();range.moveToElementText($_(el));range.select();}else if(window.getSelection){var range=document.createRange();range.selectNodeContents($_(el));window.getSelection().removeAllRanges();window.getSelection().addRange(range);}}
function translit2(str){var ru_str="АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюяіІїЇєЄ";var en_str=['A','B','V','G','D','E','JO','ZH','Z','I','J','K','L','M','N','O','P','R','S','T','U','F','H','C','CH','SH','SHH','','I','','JE','JU','JA','a','b','v','g','d','e','jo','zh','z','i','j','k','l','m','n','o','p','r','s','t','u','f','h','c','ch','sh','shh','','i','','je','ju','ja','i','I','ji','JI','je','JE'];var tmp_str=[];for(var i=0,l=str.length;i<l;i++){var s=str.charAt(i),n=ru_str.indexOf(s);if(n>=0){tmp_str[tmp_str.length]=en_str[n];}
else{tmp_str[tmp_str.length]=s;}}
return tmp_str.join("");}
function get_normal_count(value,mess){var d_cnt=Math.abs(value)%100;var n1=d_cnt%10;if(d_cnt>10&&d_cnt<20)return typeof mess[5]!='undefined'?mess[5]:mess[1];if(n1>1&&n1<5)return mess[2];if(n1==1)
return mess[1];else
return typeof mess[5]!='undefined'?mess[5]:mess[2];}
function transliterate(cyrstr,force_change,params){if(typeof force_change=='undefined')
force_change=true;if(typeof params=='undefined')
params=[];var ru=['А','а','Б','б','В','в','Г','г','Д','д','Е','е','Ё','ё','Ж','ж','З','з','И','и','Й','й','К','к','Л','л','М','м','Н','н','О','о','П','п','Р','р','С','с','Т','т','У','у','Ф','ф','Х','х','Ц','ц','Ч','ч','Ш','ш','Щ','щ','Ъ','ъ','Ы','ы','Ь','ь','Э','э','Ю','ю','Я','я','Ї','ї','І','і','Є','є',' ','\''];var en=['A','a','B','b','V','v','G','g','D','d','E','e','E','e','Zh','zh','Z','z','I','i','J','j','K','k','L','l','M','m','N','n','O','o','P','p','R','r','S','s','T','t','U','u','F','f','H','h','C','c','Ch','ch','Sh','sh','Sch','sch','','','Y','y','','','E','e','Ju','ju','Ja','ja','Ji','ji','I','i','Je','je','-',''];console.log('goo!');for(var i=0,l=ru.length;i<l;i++){cyrstr=cyrstr.replace(new RegExp(ru[i]),en[i]);console.log(ru[i],en[i],cyrstr);}
if(force_change){var tmp=cyrstr.replace(/[^a-zA-Z0-9-.]/ig,'');tmp=tmp.replace(/-{1,}/ig,'-');return tmp.replace(/(.*)-$/ig,'$1');}else{return cyrstr;}}
function objAutocompleter(params){this._init(params);this._thisid=objAutoInstances.length;objAutoInstances[objAutoInstances.length]=this;}
objAutocompleter.prototype={_objid:null,_loader_show:true,_loader_align:true,_ajxhref:null,_minchars:3,_no_wait:false,_callbacks:{},_checkTout:2000,_params:{},_width:null,_left_offset:null,_checkTimer:null,_checkTicket:null,_loader:null,_thisid:null,_results:null,_results_cnt:0,_bg:null,_cursor:null,addParams:function(params){if(typeof params=='object'&&params!=null){for(var k in params){if(this['_'+k]!='undefined'){this['_'+k]=params[k];}}}},_init:function(params){this.addParams(params);if(!this._objid||!$_(this._objid))return;var athis=this;var callComplite=function(e){return athis._callComplete(e,athis);}
$_(this._objid).setAttribute('autocomplete','off');portal.events.attach($_(this._objid),'keyup',callComplite,false);},_moveCursor:function(obj,cursor){var childs=obj._results.getElementsByTagName('li');for(var i=0,len=childs.length;i<len;i++){if(i!=cursor||cursor==null)
portal.css.removeClass(childs[i],'active');else
portal.css.addClass(childs[i],'active');}},_callComplete:function(e,obj){if($_(obj._objid).value==''||$_(obj._objid).value.length<obj._minchars)return;if(obj._checkTimer){if(typeof obj._checkTicket!="undefined"&&obj._checkTicket)
portal.loader.destroy(obj._checkTicket);clearTimeout(obj._checkTimer);}
switch(portal.events.getKey(e)){case 13:case 3:obj._hideResults(obj._thisid);if(obj._cursor!=null){obj._applyValue(e,obj._thisid,'ac-'+obj._thisid+'-'+obj._cursor,strip_tags($_('ac-'+obj._thisid+'-'+obj._cursor).innerHTML));return false;}else
return;break;case 38:var cursor=obj._cursor==null?0:obj._cursor-1;if(cursor>=0){obj._cursor=cursor;obj._moveCursor(obj,obj._cursor);portal.events.stop(e);}
return false;break;case 40:var cursor=obj._cursor==null?0:obj._cursor+1;if(cursor<obj._results_cnt){obj._cursor=cursor;obj._moveCursor(obj,obj._cursor);portal.events.stop(e);}
return false;break;case 27:$_(this._objid).value='';return false;break;case 91:case 18:case 17:case 16:case 20:case 37:case 39:case 112:case 113:case 114:case 115:case 116:case 117:case 118:return false;break;}
var target=window.event?window.event.srcElement:e.target;if(typeof obj._checkTicket!="undefined"&&obj._checkTicket)
portal.loader.destroy(obj._checkTicket);if(obj._loader_show){if(obj._loader==null){obj._loader=elem('ins',{'id':'_acl_'+obj._thisid},{'position':'absolute','z-index':'1000000'});document.body.appendChild(obj._loader);obj._loader.style.display='block';}else
obj._loader.style.display='block';obj._checkTicket=portal.loader.create(obj._loader,{"mode":"mini"});}
if(obj._loader_align&&obj._loader_show){setTimeout(function(){obj.get(obj._thisid)
var pos=portal.dom.pos(obj._objid);try{var border=document.defaultView.getComputedStyle($_(obj._objid),'').getPropertyValue('border-right-width');}catch(e){var border=$_(obj._objid).currentStyle.borderWidth;}
obj._loader.style.left=(pos.x+pos.w-obj._loader.offsetWidth-2*parseInt(border))+'px';obj._loader.style.top=(pos.y+pos.h-obj._loader.offsetHeight-parseInt(border))+'px';},100);}
obj._checkTimer=setTimeout(function(){obj.get(obj._thisid)},obj._no_wait?0:obj._checkTout);},_applyValue:function(e,id,elem_id,value){var athis=objAutoInstances[id];$_(athis._objid).value=value.replace(/(<([^>])*>|>|<)/gi,'');$_(athis._objid).focus();athis._hideResults(id);athis._cursor=null;if(typeof athis._callbacks['apply']=='function')
athis._callbacks['apply'](athis,{'id':elem_id,'value':value,'event':e?e:window.event});},_connectEventsToResult:function(id,obj){var athis=objAutoInstances[id];portal.events.attach(obj,'click',function(e){athis._applyValue(e,id,obj.id,strip_tags(obj.innerHTML))});portal.events.attach(obj,'mouseover',function(e){athis._cursor=null;athis._moveCursor(athis,athis._cursor)});},_insertResults:function(id,results){var athis=objAutoInstances[id];if(athis._results==null){athis._results=elem('div',{'id':'_acr_'+athis._thisid,'class':'auto_complete'},{'position':'absolute','display':'none','z-index':'1000001'});athis._bg=elem('div',{'id':'_acb_'+athis._thisid},{'position':'absolute','display':'none','z-index':'1000000','width':getClientWidth()+'px','height':getDocumentHeight()+'px','left':'0px','top':'0px'},' ');document.body.appendChild(athis._bg);document.body.appendChild(athis._results);portal.events.attach(athis._bg,'click',function(){athis._hideResults(id)});}
if(typeof results!='undefined'&&results){athis._results.innerHTML=results;athis._results.style.display='block';var pos=portal.dom.pos(athis._objid);athis._results.style.top=(pos.y+$_(athis._objid).offsetHeight)+'px';athis._results.style.width=(athis._width!=null?athis._width:$_(athis._objid).offsetWidth)+'px';athis._results.style.left=((athis._left_offset!=null?parseInt(athis._left_offset):0)+pos.x)+'px';athis._bg.style.width=getClientWidth()+'px';athis._bg.style.height=getDocumentHeight()+'px';var childs=athis._results.getElementsByTagName('li');for(var i=0,len=childs.length;i<len;i++){athis._connectEventsToResult(id,childs[i]);childs[i].setAttribute('id','ac-'+athis._thisid+'-'+i);}
athis._results_cnt=childs.length;athis._bg.style.display='block';}},_hideResults:function(id){var athis=objAutoInstances[id];if(athis._results)
athis._results.style.display='none';if(athis._bg)
athis._bg.style.display='none';},get:function(id){var req=new JsHttpRequest();var athis=objAutoInstances[id];req.onreadystatechange=function(){if(req.readyState==4){if(athis._loader_show){if(typeof athis._checkTicket!="undefined"&&athis._checkTicket)
portal.loader.destroy(athis._checkTicket);athis._loader.style.display='none';}
if(req.responseJS.status==200){athis._insertResults(id,req.responseJS.response);}}}
req.open("POST",athis._ajxhref,true);var params={};if(typeof athis._params=="object"){for(var i in athis._params){params[i]=athis._params[i];}}
params[$_(athis._objid).getAttribute('name')]=$_(athis._objid).value;if(typeof athis._callbacks['before']=='function'){params=athis._callbacks['before'](params);}
req.send(params);}}
objAutoInstances=[];function objFieldsController(params,formid){this._init(params,formid);}
objFieldsController.prototype={_fieldTypes:{'integer':{'fieldReg':"^(\\-)?[0-9]+$",'allowedKeys':['shift','control','alt','tab','enter','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'float':{'fieldReg':"^(\\-)?[0-9]+((,|.)[0-9]+)?$",'allowedKeys':['shift','control','alt','tab','enter','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'datetime':{'fieldReg':"^[0-9]{2}:[0-9]{2}(?::[0-9]{2})?\\s[0-9]{4}\\-[0-9]{2}\\-[0-9]{2}$",'allowedKeys':['shift','control','alt','tab','enter','backspace','space','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'unixtimestamp':{'fieldReg':"^[0-9]{2}:[0-9]{2}(?::[0-9]{2})?\\s[0-9]{2}\\-[0-9]{2}\\-[0-9]{4}$",'allowedKeys':['shift','control','alt','tab','enter','backspace','space','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'time':{'fieldReg':"^[0-9]{2,}:[0-9]{2}(?::[0-9]{2})?$",'allowedKeys':['shift','control','alt','tab','enter','space','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'text':{'fieldReg':"^.*$",'allowedKeys':['shift','control','alt','esc','tab','enter','space','capslock','numlock','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'password':{'fieldReg':"^.*$",'allowedKeys':['shift','control','alt','esc','tab','enter','space','capslock','numlock','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']},'password_check':{'fieldReg':"^.*$",'allowedKeys':['shift','control','alt','esc','tab','enter','space','capslock','numlock','backspace','insert','home','delete','end','pageup','pagedown','left','up','right','down']}},_checkTout:1000,_submitCtrlEnter:false,_obj_id:null,_always_submit:false,_fields_postfix:'',_onunloadcheck:false,_oncheckfail:false,_onchecksuccess:false,_oncheckresult:false,_text:null,_img_cache:{'used':null,'not_used':null},_error_levels:{'normal':'','warning':'b-input-warning','error':'b-input-bad'},_allowedKeyCodes:{'esc':27,'escape':27,'tab':9,'space':32,'return':13,'enter':13,'backspace':8,'scrolllock':145,'scroll_lock':145,'scroll':145,'shift':16,'control':17,'alt':18,'capslock':20,'caps_lock':20,'caps':20,'numlock':144,'num_lock':144,'num':144,'pause':19,'break':19,'insert':45,'home':36,'delete':46,'end':35,'pageup':33,'page_up':33,'pu':33,'pagedown':34,'page_down':34,'pd':34,'left':37,'up':38,'right':39,'down':40,'f1':112,'f2':113,'f3':114,'f4':115,'f5':116,'f6':117,'f7':118,'f8':119,'f9':120,'f10':121,'f11':122,'f12':123},_form:{},_fields:{},_activeElement:null,_isCtrl:false,_init:function(params,formid){this.attach(params,formid);this._obj_id=objFieldsController.Instances.length;objFieldsController.Instances[this._obj_id]=this;if(!top.window['fieldcontrollers_cnt']){top.window['fieldcontrollers_cnt']=1;}else{top.window['fieldcontrollers_cnt']++;}},_preloadImages:function(){this._img_cache.used=new Image();this._img_cache.used.src=skin_img_dir+'stop_button.png';this._img_cache.not_used=new Image();this._img_cache.not_used.src=skin_img_dir+'ok_button2.png';},_prepareFieldId:function(field){return this._fields_postfix!=''?field+this._fields_postfix:field;},_prepareFieldsNum:function(field,func){if(typeof func=='function'||typeof func=='object'){var isfirst=true;var id=this._prepareFieldId(field);if(this._fields[field]['multilang']){for(var j in $p.vars.langs){if(this._fields[field]['multistore']){for(var k=0;k<this._fields[field]['multistore'];k++){if($_(id+'['+j+']['+k+']')){result=func(id+'['+j+']['+k+']',j,isfirst,this);isfirst=false;if(result=='exit')return true;}else return false;}}else if($_(id+'['+j+']')){result=func(id+'['+j+']',j,isfirst,this);isfirst=false;if(result=='exit')return true;}else
return false;}}else{if(this._fields[field]['multistore']){for(var k=0;k<this._fields[field]['multistore'];k++){if($_(id+'['+k+']')){result=func(id+'['+k+']',null,isfirst,this);if(result=='exit')return true;}else{return false;}}}else if($_(id)){result=func(id,null,isfirst,this);if(result=='exit')return true;}else
return false;}}
return true;},_extend:function(data,options){if(typeof options=='object'&&options){for(var i in options){data[i]=options[i];}}
return data;},_prepareField:function(i,data,multilang_enabled,firstField){this._fields[i]={};if(!data.type)
data.type='text';this._fields[i]=this._extend(this._fields[i],data);this._fields[i]['type']=data.type;if(data.allow!=null&&!data.allow)
var allow=false;else
var allow=true;this._fields[i]['state']={'allow':allow,'unique':true,'detailed':{},'detailed_ids':{}};if(typeof data.multilang!="undefined"&&data.multilang&&multilang_enabled)
this._fields[i]['multilang']=data.multilang;else
this._fields[i]['multilang']=false;if(typeof data.multistore!="undefined"&&data.multistore){this._fields[i]['multistore']=data.multistore;}else
this._fields[i]['multistore']=false;var athis=this;if(!this._prepareFieldsNum(i,function(id,lang,isfirst){athis._fields[i]['state']['detailed_ids'][id]=null})){delete this._fields[i];return false;}
if(typeof data.unique=="object"){this._prepareFieldsNum(i,function(id,lang,isfirst){if($_(id+'_check_container'))
$_(id+'_check_container').parentNode.removeChild($_(id+'_check_container'));$p.dom.appendAfter($_(id),elem('span',{'id':id+'_check_container','lang':lang},false,false));});this._fields[i].unique=data.unique;}else this._fields[i].unique=false;if(typeof data.empty!="undefined"&&data.empty!=null&&!data.empty){this._prepareFieldsNum(i,function(id,lang,isfirst){$p.css.addClass($_(id),'b-input-mandatory');});}else data.empty=true;this._fields[i]['empty']=data.empty;if(typeof data.fullempty!="undefined"&&data.fullempty!=null&&!data.fullempty){this._prepareFieldsNum(i,function(id,lang,isfirst){$p.css.addClass($_(id),'b-input-mandatory-all');});}else data.fullempty=true;this._fields[i]['fullempty']=data.fullempty;if(typeof data.helptext!="undefined"&&data.helptext!=null){this._prepareFieldsNum(i,function(id,lang,isfirst){if($_(id)&&($_(id).tagName.toLowerCase()=='textarea'||$_(id).tagName.toLowerCase()=='input')&&trim($_(id).value)==''||trim($_(id).value)==data.helptext){$_(id).value=data.helptext;$p.css.addClass($_(id),'helptext');}});}else data.helptext=null;this._fields[i]['helptext']=data.helptext;this._fields[i]['default_value']=typeof data.default_value!="undefined"&&data.default_value;this._fields[i]['maxlength']=maxlength=typeof data.maxlength!="undefined"&&data.maxlength;this._fields[i]['minlength']=minlength=typeof data.minlength!="undefined"&&data.minlength;if(typeof data.lengthtext!="undefined")
this._fields[i]['lengthtext']=data.lengthtext;if(maxlength||minlength){var athis=this;this._prepareFieldsNum(i,function(id,lang,isfirst){var props,style;if(lang){props={'id':id+'_length_container','lang':lang,'class':'input-maxlength'};style={'display':isfirst?'':'none'};}else{props={'id':id+'_length_container','class':'input-maxlength'};style=null;}
if($_(id+'_length_container'))
$_(id+'_length_container').parentNode.removeChild($_(id+'_length_container'));var cnt_length=athis._buildLengthValue($_(id).value!=athis._fields[i]['helptext']?$_(id).value.length:0,athis,i,null);$p.dom.appendAfter($_(id),elem('span',props,style,cnt_length));});}
this._fields[i]['maxvalue']=maxvalue=typeof data.maxvalue!="undefined"&&data.maxvalue;this._fields[i]['minvalue']=minvalue=typeof data.minvalue!="undefined"&&data.minvalue;this._prepareFieldsNum(i,this._prepareHash);if(typeof this._fields[i].hash!='undefined')
this._fields[i].base_hash=this._fields[i].hash=crc32(this._fields[i].hash);if(typeof data.onsubmit=="function")
this._fields[i]['onsubmit']=data.onsubmit;if(typeof data.oncheck=="function")
this._fields[i]['oncheck']=data.oncheck;if(typeof data.fieldReg!="undefined"&&data.fieldReg){this._fields[i]['fieldReg']=new RegExp(data.fieldReg,'im');}else if(this._fieldTypes[data.type])
this._fields[i]['fieldReg']=new RegExp(this._fieldTypes[data.type].fieldReg,"im");else
this._fields[i]['fieldReg']=new RegExp(".*",'im');this._fields[i]['allow']={};if(this._fieldTypes[data.type]){this._fields[i]['allow']=new Object();for(var j=0,cnt=this._fieldTypes[data.type].allowedKeys.length;j<cnt;j++){this._fields[i]['allow'][this._allowedKeyCodes[this._fieldTypes[data.type].allowedKeys[j]]]=1;}}
this._setFieldState(this,i,true);this._onkeydown(this,i);this._onkeyup(this,i);this._onfocus(this,i);this._onblur(this,i);this._onchange(this,i);if(firstField&&top.window['fieldcontrollers_cnt']==1){this._prepareFieldsNum(i,function(id,lang,isfirst){try{if($_(id)&&$_(id).offsetWidth!==0&&(typeof $_(id).focus=='function'||typeof $_(id).focus=='object')){$_(id).focus();return'exit';}}
catch(e){alert(e);}});}
if(data.type=='password'){var fname=i+'_check';data['type']='password_check';this._prepareField(fname,data,multilang_enabled,false);}
return true;},_checkOnunload:function(){var changed=false;for(var i in this._fields){if(this._fields[i].hash!=null&&this._fields[i].hash!=this._fields[i].base_hash){changed=true;break;}}
if(changed){return $p.mess.dialogs.closeUnsaved;}else return true;},attach:function(fields,params){var athis=this;if(typeof params=="object"&&$_(params.id)){if(params.onunloadcheck!=null)
this._onunloadcheck=params.onunloadcheck;if(params.oncheckfail!=null)
this._oncheckfail=params.oncheckfail;if(params.onchecksuccess!=null)
this._onchecksuccess=params.onchecksuccess;if(params.oncheckresult!=null)
this._oncheckresult=params.oncheckresult;if(params.text!=null)
this._text=params.text;if(typeof params.fields_postfix!='undefined'&&params.fields_postfix!=null)
this._fields_postfix=params.fields_postfix;if(this._onunloadcheck){function _unload(e){var is_unload=athis._checkOnunload();if(!is_unload){$p.e.stop(e);}
return is_unload;}
var unload_ticket=$p.e.attachUnload(_unload);}
if(typeof params.submitCtrlEnter!='undefined'&&params.submitCtrlEnter!=null)
this._submitCtrlEnter=params.submitCtrlEnter;this._form=params;this._form.submit=function(e){if(athis._always_submit){e.returnValue=false;e.preventDefault?e.preventDefault():'';return e.returnValue;}else{e.returnValue=athis.checkForm(athis);if(!e.returnValue){e.preventDefault?e.preventDefault():'';}else{athis._always_submit=true;if(athis._onunloadcheck&&typeof unload_ticket!='undefined')
$p.e.removeUnload(unload_ticket);if(athis._form.onsubmit){athis._form.onsubmit(e);}
if(!e.returnValue){athis._always_submit=false;}}
return e.returnValue;}};$p.e.attach(params.id,"submit",this._form.submit,false);}
if(typeof fields=="object"){var multilang_enabled=typeof $p.vars.langs=="object";var firstField=true,isfirst=true,allow;for(var i in fields){var id=this._prepareFieldId(i);if((typeof fields[i].multilang=="undefined")||(typeof fields[i].multilang!="undefined"&&fields[i].multilang&&multilang_enabled)){if(this._prepareField(i,fields[i],multilang_enabled,firstField)){firstField=false;}}}}},_prepareHash:function(id,lang,isfirst,obj){if($_(id)&&typeof $_(id).value!='undefined'){if(typeof obj._fields=='undefined')
var athis=objFieldsController.Instances[objFieldsController.length];else
var athis=obj;var real_id=id.replace(/^([^[]+).*$/i,'$1');if(athis._fields_postfix!=''){real_id=id.replace(athis._fields_postfix,'');}
if(typeof athis._fields[real_id]!='undefined'){if(typeof athis._fields[real_id].hash=='undefined')
athis._fields[real_id].hash='';if(athis._fields[real_id].empty&&$_(id).tagName=='SELECT'&&$_(id).value=='0')
var value='';else if(athis._fields[real_id].type=='boolean')
var value=$_(id).checked?'1':'0';else
var value=$_(id).value.replace(/\n/g,"\r\n");athis._fields[real_id].hash+=value;}}},getHashTable:function(base){var hashes={};for(var i in this._fields){hashes[i]=typeof base!='undefined'&&base?this._fields[i].base_hash:this._fields[i].hash;}
return hashes;},updateFocus:function(instance,language){if(objFieldsController.Instances[instance]._activeElement!=null){if(objFieldsController.Instances[instance]._fields[objFieldsController.Instances[instance]._activeElement]['multilang']){if(typeof language!="undefined")
$_(objFieldsController.Instances[instance]._activeElement+'['+language+']').focus();else
$_(objFieldsController.Instances[instance]._activeElement+'['+LangController._curr_lang+']').focus();}else{$_(objFieldsController.Instances[instance]._activeElement).focus();}}},checkForm:function(obj,params){if(typeof obj=='undefined'||!obj)
obj=this;var allow=true;if(typeof params=='undefined')
params={};for(var i in obj._fields){var id=this._prepareFieldId(i);var target=!obj._fields[i]['multilang']&&!obj._fields[i]['multistore']?$_(id):null;obj._fields[i]['state']['allow']=true;obj._fields[i]['state']['detailed']={};obj._fields[i]['state']['detailed_ids']={};obj._checkRegular(obj,i,target);obj._checkEmpty(obj,i,target);obj._checkMaxMin(obj,i,target);obj._checkLength(obj,i,target);obj._checkPassword(obj,i,target);if(typeof obj._fields[i]['oncheck']=='function'){obj._fields[i]['oncheck'](obj,i,target);}
if(!obj._setFieldState(obj,i,false,params)){allow=false;}}
if(!allow&&!(typeof params.onlycheck!='undefined'&&params.onlycheck)){if(obj._oncheckresult!=false&&typeof obj._oncheckresult=='function')
obj._oncheckresult(allow,obj._fields);else{alert($p.mess.forms.notvalid);}}
return allow;},_onkeydown:function(obj,caller){var callback=function(e){var ret=obj._checkInputKey(e,obj,caller);if(e.preventDefault&&!ret){e.preventDefault();}
return ret;};obj._fields[caller]['keydown']=callback;this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id))
$p.e.attach($_(id),"keydown",callback,false);});},_onkeyup:function(obj,caller){var callback=function(e){e=$p.e.get(e);var keycode=$p.e.getKey(e);var target=$p.e.getTarget(e);obj._fields[caller]['state']['allow']=true;obj._fields[caller]['state']['detailed']={};obj._checkRegular(obj,caller,target);obj._checkEmpty(obj,caller,target);obj._checkMaxMin(obj,caller,target);obj._checkLength(obj,caller,target);obj._checkPassword(obj,caller,target);obj._prepareFieldsNum(caller,obj._prepareHash);if(typeof obj._fields[caller].hash!='undefined'){obj._fields[caller].hash=crc32(obj._fields[caller].hash);}
if($p.keys.isCtrl(keycode))
obj._isCtrl=false;if($p.keys.isEnter(keycode)&&obj._fields[caller]['onsubmit']){if(obj._setFieldState(obj,caller))
return obj._fields[caller]['onsubmit'](e);else
return false;}
if(obj._fields[caller].unique){obj._checkUnique(e,obj,caller);}
obj._setFieldState(obj,caller,false,{'error_level':'warning'});obj._checkHelpText(obj,caller,target,true);if(e.preventDefault){e.preventDefault();}
return true;}
obj._fields[caller]['keyup']=callback;this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id))
$p.e.attach($_(id),"keyup",callback,false);});},_onfocus:function(obj,caller){var callback=function(e){var ev=e||window.event;var target=window.event?window.event.srcElement:e.target;obj._activeElement=caller;obj._checkHelpText(obj,caller,target);return true;};this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id))
$p.e.attach($_(id),"focus",callback,false);});},_onblur:function(obj,caller){var callback=function(e){var target=window.event?window.event.srcElement:e.target;obj._fields[caller]['state']['allow']=true;obj._fields[caller]['state']['detailed']={};obj._checkRegular(obj,caller,target);obj._checkEmpty(obj,caller,target);obj._checkMaxMin(obj,caller,target);obj._checkLength(obj,caller,target);obj._checkPassword(obj,caller,target);obj._setFieldState(obj,caller,false,{'error_level':'warning'});obj._checkHelpText(obj,caller,target);if(typeof obj._fields[caller]['onblur']=='function')
obj._fields[caller]['state']['allow']=obj._fields[caller]['onblur'](obj,caller,obj._fields[caller]['state']['allow'])&&obj._fields[caller]['state']['allow'];}
obj._fields[caller]['blur']=callback;this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id))
$p.e.attach($_(id),"blur",callback,false);});},_onchange:function(obj,caller){var callback=function(e){var target=window.event?window.event.srcElement:e.target;obj._prepareFieldsNum(caller,obj._prepareHash);if(typeof obj._fields[caller].hash!='undefined'){obj._fields[caller].hash=crc32(obj._fields[caller].hash);}}
obj._fields[caller]['change']=callback;this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id))
$p.e.attach($_(id),"change",callback,false);});},_checkHelpText:function(obj,caller,target,onlydecorate){if(obj._fields[caller]['helptext']&&trim(target.value)==''){if(typeof onlydecorate=='undefined')
target.value=obj._fields[caller]['helptext'];$p.css.addClass(target,'helptext');}else if(obj._fields[caller]['helptext']&&trim(target.value)==obj._fields[caller]['helptext']){if(typeof onlydecorate=='undefined'){if(typeof obj._fields[caller].default_value!='undefined'&&obj._fields[caller].default_value){target.value=obj._fields[caller].default_value;}else
target.value='';}
$p.css.removeClass(target,'helptext');}else if(obj._fields[caller]['helptext']&&trim(target.value)!=''&&trim(target.value)!=obj._fields[caller]['helptext']){$p.css.removeClass(target,'helptext');}},_checkRegular:function(obj,caller,target){var id=obj._prepareFieldId(caller);obj._fields[caller]['state']['detailed']['fieldReg']=true;obj._prepareFieldsNum(caller,function(id,lang,isfirst){if(obj._fields[caller]['helptext']&&trim($_(id).value)==obj._fields[caller]['helptext'])
var value='';else
var value=$_(id).value;if((obj._fields[caller]['empty']||obj._fields[caller]['fullempty'])&&value=='')return true;if($_(id)&&!obj._fields[caller]['fieldReg'].test(value)){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['fieldReg']=false;obj._fields[caller]['state']['detailed_ids'][id]=false;return false;}
obj._fields[caller]['state']['detailed_ids'][id]=true;});},_checkEmpty:function(obj,caller,target){var value;var id=obj._prepareFieldId(caller);obj._fields[caller]['state']['detailed']['empty']=true;if(obj._fields[caller]['multilang']){var is_empty=true;for(var j in $p.vars.langs){if($_(id+'['+j+']')){if(obj._fields[caller]['type']=='boolean')
value=$_(id+'['+j+']').checked;else{if(obj._fields[caller]['helptext']&&trim(obj._getFieldValue($_(id+'['+j+']')))==obj._fields[caller]['helptext'])
value='';else
value=obj._getFieldValue($_(id+'['+j+']'));}
if(!obj._fields[caller]['fullempty']&&isEmpty(value)){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['empty']=false;break;}else if(!obj._fields[caller]['empty']&&!isEmpty(value)){is_empty=false;break;}}}
if(obj._fields[caller]['fullempty']&&!obj._fields[caller]['empty']&&is_empty){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['empty']=false;}}else{if(obj._fields[caller]['type']=='boolean'){value=$_(id).checked;}else{if(obj._fields[caller]['helptext']!==''&&trim(obj._getFieldValue(target))==obj._fields[caller]['helptext'])
value='';else
value=obj._getFieldValue(target);}
if($_(id)&&(!obj._fields[caller]['empty']||!obj._fields[caller]['fullempty'])&&isEmpty(value)){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['empty']=false;}}},_checkMaxMin:function(obj,caller,target){if(obj._fields[caller]['maxvalue']||obj._fields[caller]['minvalue']){var flds=[];this._prepareFieldsNum(caller,function(id,lang,isfirst){flds.push(id);});obj._fields[caller]['state']['detailed']['minvalue']=obj._fields[caller]['state']['detailed']['maxvalue']=true;for(var item in flds){if($_(flds[item])){var value='';if(typeof target!='undefined'&&target&&typeof target=='object'&&target.value&&target.id&&target.id==flds[item])
value=target.value;else
value=$_(flds[item]).value;if(obj._fields[caller]['helptext']&&trim(value)==obj._fields[caller]['helptext'])
value=0;if(!(trim(value)==''&&obj._fields[caller]['empty'])&&obj._fields[caller]['minvalue']&&parseFloat(obj._fields[caller]['minvalue'])>value){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['minvalue']=false;}
if(obj._fields[caller]['maxvalue']&&parseFloat(obj._fields[caller]['maxvalue'])>value){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['maxvalue']=false;}}}
return obj._fields[caller]['state']['allow'];}
return true;},_buildLengthValue:function(alength,obj,caller,target){if(typeof obj._fields[caller]['lengthtext']!='undefined')
cnt_length=obj._fields[caller]['lengthtext'];else
cnt_length='';if(obj._fields[caller]['minlength']){if(typeof obj._fields[caller]['lengthtext']!='undefined')
cnt_length=cnt_length.replace('[minlength]',obj._fields[caller]['minlength']);else if(obj._text&&typeof obj._text.minlength!='undefined')
cnt_length=obj._text.minlength.replace('[minlength]',obj._fields[caller]['minlength']);else
cnt_length=obj._fields[caller]['minlength']+'/';}
if(typeof obj._fields[caller]['lengthtext']!='undefined')
cnt_length=cnt_length.replace('[length]',alength);else if(obj._text&&typeof obj._text.current!='undefined')
cnt_length+=obj._text.current.replace('[length]',alength);else
cnt_length+=alength;if(obj._fields[caller]['maxlength']){if(typeof obj._fields[caller]['lengthtext']!='undefined'){cnt_length=cnt_length.replace('[maxlength]',obj._fields[caller]['maxlength']);cnt_length=cnt_length.replace('[leftlength]',obj._fields[caller]['maxlength']-alength);}else if(obj._text&&typeof obj._text.maxlength!='undefined'){cnt_length+=obj._text.maxlength.replace('[maxlength]',obj._fields[caller]['maxlength']).replace('[leftlength]',obj._fields[caller]['maxlength']-alength);}else
cnt_length+='/'+obj._fields[caller]['maxlength'];}
return cnt_length;},_checkLength:function(obj,caller,target){var aid=caller.replace(this._fields_postfix,'');obj._fields[aid]['state']['detailed']['maxlength']=true;if(obj._fields[aid]['maxlength']||obj._fields[aid]['minlength']){var flds=[];this._prepareFieldsNum(aid,function(id,lang,isfirst){flds.push(id);});var strip_value='',strip_length=0,alength=0;for(var item in flds){if($_(flds[item])){var value='';if(typeof target!='undefined'&&target&&typeof target=='object'&&typeof target.value!='undefined'&&target.value&&target.id&&target.id==flds[item]){value=target.value;}else{value=$_(flds[item]).value;}
strip_value='';if(value!=''){var tmp=elem("DIV");tmp.innerHTML=value;strip_value=tmp.textContent||tmp.innerText;delete tmp;if(typeof strip_value=='string'){strip_value=trim(strip_value);}}
if(obj._fields[aid]['helptext']&&trim(value)==obj._fields[aid]['helptext']){alength=0;strip_length=0;}else{alength=value.length;strip_length=strip_value.length;}
value=null;var cnt_length=obj._buildLengthValue(strip_length,obj,aid,target);$_(flds[item]+'_length_container').innerHTML=cnt_length;$_(flds[item]+'_length_container').className='input-maxlength';if(obj._fields[aid]['maxlength']){if(alength>obj._fields[aid]['maxlength']){$_(flds[item]+'_length_container').className='input-maxlength-error';obj._fields[aid]['state']['allow']=false;obj._fields[aid]['state']['detailed']['maxlength']=false;}}
if(!(strip_length==0&&obj._fields[aid]['empty'])&&obj._fields[aid]['minlength']){if(strip_length<obj._fields[aid]['minlength']){$_(flds[item]+'_length_container').className='input-maxlength-error';obj._fields[aid]['state']['allow']=false;obj._fields[aid]['state']['detailed']['maxlength']=false;}}}}
return obj._fields[aid]['state']['allow'];}
return true;},_checkPassword:function(obj,caller,target){if(!obj._fields[caller])return true;if(obj._fields[caller].type=='password'||obj._fields[caller].type=='password_check'){var id=caller.replace('_check','');var state=true;if(!obj._fields[id].empty&&trim($_(id).value)=='')state=false;state=state&&(trim($_(id).value)==trim($_(id+'_check').value));obj._fields[id]['state']['allow']=obj._fields[id+'_check']['state']['allow']=state;obj._fields[caller].type=='password'?obj._setFieldState(obj,caller+'_check',false,{'error_level':'warning'}):obj._setFieldState(obj,id,false,{'error_level':'warning'});return obj._fields[caller]['state']['allow'];}},_checkUnique:function(e,obj,caller,force_caller){if(!obj._fields[caller])return true;var target=window.event?window.event.srcElement:e.target;if(obj._fields[caller].checkTimer)
clearTimeout(obj._fields[caller].checkTimer);if(typeof obj._fields[caller].checkTicket!="undefined"&&obj._fields[caller].checkTicket)
$p.loader.destroy(obj._fields[caller].checkTicket);obj._fields[caller].checkTicket=$p.loader.create(caller+'_check_container',{"mode":"mini"});var value=typeof force_caller!="undefined"&&force_caller?$_(caller).value:target.value;if(obj._fields[caller]['helptext']&&trim(value)==obj._fields[caller]['helptext'])
value='';if(typeof objFieldsController.Instances[obj._obj_id]!='undefined'&&typeof objFieldsController.Instances[obj._obj_id]._callCheckTimer=='function')
obj._fields[caller].checkTimer=setTimeout('objFieldsController.Instances['+obj._obj_id+']._callCheckTimer(\''+caller+'\', \''+value+'\')',obj._checkTout);},_callCheckTimer:function(caller,value){var req=new JsHttpRequest();var obj=this;obj._fields[caller]['state']['detailed']['unique']=true;req.onreadystatechange=function(){if(req.readyState==4){if(typeof obj._fields[caller].checkTicket!="undefined"&&obj._fields[caller].checkTicket)
$p.loader.destroy(obj._fields[caller].checkTicket);if($_(caller+'_check_container')){if(req.responseJS.status==200){$_(caller+'_check_container').innerHTML='<span alt="'+$p.mess.element.used+'" title="'+$p.mess.element.used+'" class="b-used actions"></span>';obj._fields[caller]['state']['unique']=false;obj._fields[caller]['state']['detailed']['unique']=false;}else{$_(caller+'_check_container').innerHTML='<span alt="'+$p.mess.element.not_used+'" title="'+$p.mess.element.not_used+'" class="b-not-used actions"></span>';obj._fields[caller]['state']['unique']=true;obj._fields[caller]['state']['detailed']['unique']=true;}}
var state=obj._setFieldState(obj,caller,false,{'error_level':'warning'});if(typeof obj._fields[caller].unique.callback=='function'){obj._fields[caller].unique.callback(caller,state,obj._fields[caller]['state']);}}}
req.open("POST",obj._fields[caller].unique.rest,true);var params=null;if(typeof obj._fields[caller].unique.params!="undefined"){params={};for(var i in obj._fields[caller].unique.params){if(typeof obj._fields[caller].unique.params[i]=="object"&&obj._fields[caller].unique.params[i]!=null){params[i]=obj._fields[caller].unique.params[i].value;}}}else params=null;req.send({'method':'post','action':'check','field':caller,'value':value,'exclude':obj._fields[caller].unique.exclude,'params':params});},_getFieldValue:function(target){if(target){switch(target.tagName.toLowerCase()){case'checkbox':return parseInt(target.checked);break;case'select':if(typeof target!='undefined'&&target.selectedIndex!==null&&typeof target.options[target.selectedIndex]!='undefined'&&typeof target.options[target.selectedIndex]!='unknown')
return target.options[target.selectedIndex].value;break;default:return target.value;break;}}},_setFieldState:function(obj,caller,is_init,params){var state=true;for(var i in obj._fields[caller]['state']){if(typeof obj._fields[caller]['state'][i]!='undefined'&&!obj._fields[caller]['state'][i]){state=false;break;}}
if(typeof params!='object'&&!params){params={};}
if(!(typeof params['onlycheck']!='undefined'&&params['onlycheck'])){var error_mode='error';if(typeof params['error_level']!='undefined'&&params['error_level']){error_mode=params['error_level'];}
this._prepareFieldsNum(caller,function(id,lang,isfirst){if($_(id)){if(state&&(!obj._fields[caller]['multistore']||(obj._fields[caller]['multistore']&&obj._fields[caller]['state']['detailed_ids'][id]==true))){$p.css.removeClass($_(id),obj._error_levels['error']);$p.css.removeClass($_(id),obj._error_levels['warning']);}else if(!state&&(!obj._fields[caller]['multistore']||(obj._fields[caller]['multistore']&&obj._fields[caller]['state']['detailed_ids'][id]===false))){if(error_mode=='error'||(error_mode=='warning'&&$_(id).value!='')){$p.css.addClass($_(id),obj._error_levels[error_mode]);}}}});}
if(typeof is_init=='undefined'||(typeof is_init!='undefined'&&!is_init)){if(!state&&typeof this._oncheckfail=='function'){this._oncheckfail(this._prepareFieldId(caller),state,obj._fields[caller]['state']);}
if(state&&typeof this._onchecksuccess=='function'){this._onchecksuccess(this._prepareFieldId(caller),state,obj._fields[caller]['state']);}}
return state;},_checkInputKey:function(e,obj,caller){if(!obj._fields[caller])return true;e=$p.e.get(e);var keycode=$p.e.getKey(e);var target=$p.e.getTarget(e);obj._fields[caller]['state']['detailed']['keycode']=true;if($p.keys.isCtrl(keycode))
obj._isCtrl=true;else if(obj._submitCtrlEnter&&obj._isCtrl&&$p.keys.isEnter(keycode)){if(obj._setFieldState(obj,caller)){return obj._form.submit(e);}else
return false;}
if(!obj._fields[caller]['state']['allow']&&obj._fields[caller]['fieldReg'].test(target.value+String.fromCharCode(keycode))){obj._fields[caller]['state']['allow']=false;obj._fields[caller]['state']['detailed']['keycode']=false;}
var allow=obj._fields[caller]['allow']&&obj._fields[caller]['allow'][keycode];switch(obj._fields[caller]['type']){case'integer':allow=allow||$p.keys.isInteger(keycode);break;case'float':allow=allow||$p.keys.isFloat(keycode);break;case'datetime':allow=allow||$p.keys.isDatetime(keycode);break;case'time':allow=allow||$p.keys.isTime(keycode);break;case'text':default:allow=allow||$p.keys.isText(keycode);break;}
obj._setFieldState(obj,caller,false,{'error_level':'warning'});return allow;}}
objFieldsController.Instances=new Array();